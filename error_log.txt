2024-12-19 20:37:53,856 - ERROR - An error occurred: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}
Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 176, in get_play_card_action
    responses = self.react_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.PermissionDeniedError: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}
During task with name 'agent' and id '2cb86f5f-0b82-2151-6916-57361b48e2a1'
2024-12-19 20:43:41,567 - ERROR - An error occurred: 'Card' object has no attribute 'monster_id'
Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 191, in get_play_card_action
    target = next((monster for monster in self.game.hand if monster.monster_id == target_id), None)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 191, in <genexpr>
    target = next((monster for monster in self.game.hand if monster.monster_id == target_id), None)
                                                            ^^^^^^^^^^^^^^^^^^
AttributeError: 'Card' object has no attribute 'monster_id'
2024-12-19 20:45:54,108 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'
Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-19 20:49:01,661 - ERROR - An error occurred: can only concatenate str (not "type") to str
Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 188, in get_play_card_action
    file.write("is_to_end_turn 's type:" + type(is_to_end_turn) + "\n")
               ~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~
TypeError: can only concatenate str (not "type") to str
2024-12-19 20:52:58,171 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-19 20:57:13,076 - ERROR - An error occurred: Specified card for CardAction is not in hand




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 113, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 105, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 48, in execute
    raise Exception("Specified card for CardAction is not in hand")
Exception: Specified card for CardAction is not in hand
2024-12-19 21:00:19,074 - ERROR - An error occurred: Got invalid JSON object. Error: Expecting ',' delimiter: line 3 column 2 (char 25)
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 180, in parse_and_check_json_markdown
    json_obj = parse_json_markdown(text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 144, in parse_json_markdown
    return _parse_json(json_str, parser=parser)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 160, in _parse_json
    return parser(json_str)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 118, in parse_partial_json
    return json.loads(s, strict=strict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 359, in loads
    return cls(**kw).decode(s)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 3 column 2 (char 25)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 173, in get_play_card_action
    jsonfile = output_parser.parse(responses["messages"][-1].content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\output_parsers\structured.py", line 97, in parse
    return parse_and_check_json_markdown(text, expected_keys)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 183, in parse_and_check_json_markdown
    raise OutputParserException(msg) from e
langchain_core.exceptions.OutputParserException: Got invalid JSON object. Error: Expecting ',' delimiter: line 3 column 2 (char 25)
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 
2024-12-19 21:05:37,976 - ERROR - An error occurred: Specified card for CardAction is not in hand




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 113, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 105, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 48, in execute
    raise Exception("Specified card for CardAction is not in hand")
Exception: Specified card for CardAction is not in hand
2024-12-19 21:13:04,289 - ERROR - An error occurred: 'hand'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 157, in get_play_card_action
    messages = template1.format_messages(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 612, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 647, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\prompt.py", line 183, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: 'hand'
2024-12-19 21:15:01,991 - ERROR - An error occurred: Specified card for CardAction is not in hand




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 113, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 105, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 48, in execute
    raise Exception("Specified card for CardAction is not in hand")
Exception: Specified card for CardAction is not in hand
2024-12-19 21:19:15,457 - ERROR - An error occurred: Specified card for CardAction is not in hand




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 113, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 105, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 48, in execute
    raise Exception("Specified card for CardAction is not in hand")
Exception: Specified card for CardAction is not in hand
2024-12-19 21:25:32,699 - ERROR - An error occurred: Specified card for CardAction is not in hand




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 113, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 105, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 48, in execute
    raise Exception("Specified card for CardAction is not in hand")
Exception: Specified card for CardAction is not in hand
2024-12-19 21:38:56,646 - ERROR - An error occurred: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 177, in get_play_card_action
    responses = self.react_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.PermissionDeniedError: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}
During task with name 'agent' and id '593c8413-84e4-979e-8de8-52524d17e9a1'
2024-12-19 21:44:38,162 - ERROR - An error occurred: Got invalid JSON object. Error: Expecting ',' delimiter: line 3 column 2 (char 24)
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 180, in parse_and_check_json_markdown
    json_obj = parse_json_markdown(text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 144, in parse_json_markdown
    return _parse_json(json_str, parser=parser)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 160, in _parse_json
    return parser(json_str)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 118, in parse_partial_json
    return json.loads(s, strict=strict)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 359, in loads
    return cls(**kw).decode(s)
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 3 column 2 (char 24)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 180, in get_play_card_action
    jsonfile = output_parser.parse(responses["messages"][-1].content)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\output_parsers\structured.py", line 97, in parse
    return parse_and_check_json_markdown(text, expected_keys)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\json.py", line 183, in parse_and_check_json_markdown
    raise OutputParserException(msg) from e
langchain_core.exceptions.OutputParserException: Got invalid JSON object. Error: Expecting ',' delimiter: line 3 column 2 (char 24)
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/OUTPUT_PARSING_FAILURE 
2024-12-19 21:51:39,594 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 52, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-19 22:03:19,268 - ERROR - An error occurred: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 175, in get_play_card_action
    responses = self.react_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.PermissionDeniedError: Error code: 403 - {'error': {'message': '免费API限制模型输入token小于4096，如有更多需求，请访问 https://api.chatanywhere.tech/#/shop 购买付费API。The number of prompt tokens for free accounts is limited to 4096. If you have additional requirements, please visit https://api.chatanywhere.tech/#/shop to purchase a premium key.', 'type': 'chatanywhere_error', 'param': None, 'code': '403 FORBIDDEN'}}
During task with name 'agent' and id '156241f9-ee5e-a34f-1a9a-7206c3515398'
2024-12-19 22:35:24,229 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 52, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-19 22:46:59,130 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 52, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-19 23:13:55,403 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-19 23:22:09,023 - ERROR - An error occurred: 'ConversationBufferWindowMemory' object has no attribute 'get_next_version'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 67, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 174, in get_play_card_action
    responses = self.react_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1605, in stream
    with SyncPregelLoop(
         ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\loop.py", line 806, in __init__
    self.checkpointer_get_next_version = checkpointer.get_next_version
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 892, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ConversationBufferWindowMemory' object has no attribute 'get_next_version'
2024-12-19 23:42:15,890 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 53, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-20 00:12:20,818 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-20 01:05:56,877 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 54, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-20 12:09:12,263 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.IRONCLAD)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-20 12:23:46,641 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 54, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-20 13:37:50,006 - ERROR - An error occurred: LLMMathChain requires the numexpr package. Please install it with `pip install numexpr`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 168, in raise_deprecation
    import numexpr  # noqa: F401
    ^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'numexpr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["llm-math","wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 735, in load_tools
    tool = _LLM_TOOLS[name](llm)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 192, in _get_llm_math
    func=LLMMathChain.from_llm(llm=llm).run,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 304, in from_llm
    return cls(llm_chain=llm_chain, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\_api\deprecation.py", line 216, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 170, in raise_deprecation
    raise ImportError(
ImportError: LLMMathChain requires the numexpr package. Please install it with `pip install numexpr`.
2024-12-20 13:39:01,741 - ERROR - An error occurred: LLMMathChain requires the numexpr package. Please install it with `pip install numexpr`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 168, in raise_deprecation
    import numexpr  # noqa: F401
    ^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'numexpr'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["llm-math","wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 735, in load_tools
    tool = _LLM_TOOLS[name](llm)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 192, in _get_llm_math
    func=LLMMathChain.from_llm(llm=llm).run,
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 304, in from_llm
    return cls(llm_chain=llm_chain, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\_api\deprecation.py", line 216, in warn_if_direct_instance
    return wrapped(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain\chains\llm_math\base.py", line 170, in raise_deprecation
    raise ImportError(
ImportError: LLMMathChain requires the numexpr package. Please install it with `pip install numexpr`.
2024-12-20 13:40:28,279 - ERROR - An error occurred: Could not import wikipedia python package. Please install it with `pip install wikipedia`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 35, in validate_environment
    import wikipedia
ModuleNotFoundError: No module named 'wikipedia'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 753, in load_tools
    tool = _get_tool_func(**sub_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 322, in _get_wikipedia
    return WikipediaQueryRun(api_wrapper=WikipediaAPIWrapper(**kwargs))
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 41, in validate_environment
    raise ImportError(
ImportError: Could not import wikipedia python package. Please install it with `pip install wikipedia`.
2024-12-20 13:41:51,454 - ERROR - An error occurred: Could not import wikipedia python package. Please install it with `pip install wikipedia`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 35, in validate_environment
    import wikipedia
ModuleNotFoundError: No module named 'wikipedia'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 753, in load_tools
    tool = _get_tool_func(**sub_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 322, in _get_wikipedia
    return WikipediaQueryRun(api_wrapper=WikipediaAPIWrapper(**kwargs))
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 41, in validate_environment
    raise ImportError(
ImportError: Could not import wikipedia python package. Please install it with `pip install wikipedia`.
2024-12-20 13:46:32,354 - ERROR - An error occurred: Could not import wikipedia python package. Please install it with `pip install wikipedia`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 35, in validate_environment
    import wikipedia
ModuleNotFoundError: No module named 'wikipedia'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 753, in load_tools
    tool = _get_tool_func(**sub_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 322, in _get_wikipedia
    return WikipediaQueryRun(api_wrapper=WikipediaAPIWrapper(**kwargs))
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 41, in validate_environment
    raise ImportError(
ImportError: Could not import wikipedia python package. Please install it with `pip install wikipedia`.
2024-12-20 13:47:45,980 - ERROR - An error occurred: Could not import wikipedia python package. Please install it with `pip install wikipedia`.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 35, in validate_environment
    import wikipedia
ModuleNotFoundError: No module named 'wikipedia'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 29, in <module>
    agent.init_battle_llm()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 437, in init_battle_llm
    tools = load_tools(["wikipedia"],llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 753, in load_tools
    tool = _get_tool_func(**sub_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\agent_toolkits\load_tools.py", line 322, in _get_wikipedia
    return WikipediaQueryRun(api_wrapper=WikipediaAPIWrapper(**kwargs))
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\utilities\wikipedia.py", line 41, in validate_environment
    raise ImportError(
ImportError: Could not import wikipedia python package. Please install it with `pip install wikipedia`.
2024-12-20 13:51:07,492 - ERROR - An error occurred: can only concatenate list (not "str") to list




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 69, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 163, in get_play_card_action
    file.write(responses["messages"]+"\n")
               ~~~~~~~~~~~~~~~~~~~~~^~~~~
TypeError: can only concatenate list (not "str") to list
2024-12-20 13:52:59,675 - ERROR - An error occurred: write() argument must be str, not list




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 69, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 163, in get_play_card_action
    file.write(responses["messages"])
TypeError: write() argument must be str, not list
2024-12-20 13:56:30,039 - ERROR - An error occurred: write() argument must be str, not HumanMessage




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 69, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 164, in get_play_card_action
    file.write(response)
TypeError: write() argument must be str, not HumanMessage
2024-12-20 13:59:59,072 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 55, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-20 14:07:09,673 - ERROR - An error occurred: BaseModel.__str__() missing 1 required positional argument: 'self'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 69, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 165, in get_play_card_action
    file.write(type(response).__str__()+response.__str__())
               ^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.__str__() missing 1 required positional argument: 'self'
2024-12-20 21:45:27,808 - ERROR - An error occurred: 'NoneType' object has no attribute 'invoke'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 40, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 351, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'invoke'
2024-12-20 21:47:26,419 - ERROR - An error occurred: 'list' object has no attribute 'name'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 380, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 200, in __init__
    name = card.name
           ^^^^^^^^^
AttributeError: 'list' object has no attribute 'name'
2024-12-20 21:50:40,765 - ERROR - An error occurred: list index out of range




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 380, in choose_card_reward
    return CardRewardAction(card_to_choose[0])
                            ~~~~~~~~~~~~~~^^^
IndexError: list index out of range
2024-12-20 21:57:40,649 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 379, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 22:01:17,121 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 379, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 22:03:53,202 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 379, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 22:07:27,859 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 379, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 22:11:39,910 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(PlayerClass.THE_SILENT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 379, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 22:32:21,354 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 257, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 380, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-20 23:00:06,779 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 57, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-20 23:37:35,231 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 57, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-21 10:33:56,249 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 12:22:11,342 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 12:38:10,783 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 12:53:05,413 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-21 13:21:24,041 - ERROR - An error occurred: Invalid command: [{'url':. Possible commands: [play, end, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Invalid command: [{'url':. Possible commands: [play, end, key, click, wait, state]
2024-12-21 13:27:30,671 - ERROR - An error occurred: Invalid command: [{'url':. Possible commands: [play, end, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 59, in handle_error
    raise Exception(error)
Exception: Invalid command: [{'url':. Possible commands: [play, end, key, click, wait, state]
2024-12-21 14:31:56,983 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 15:06:26,690 - ERROR - An error occurred: Expecting ',' delimiter: line 3 column 2 (char 24)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 74, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 167, in get_play_card_action
    jsonfile = json.loads(json_text)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 3 column 2 (char 24)
2024-12-21 15:16:44,346 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 277, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 408, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-21 15:29:09,783 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 15:50:14,975 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-21 16:16:21,234 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 278, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 406, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-21 16:36:16,161 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 38, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 16:39:20,471 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 39, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 278, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 406, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-21 18:32:28,594 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-21 18:38:02,846 - ERROR - An error occurred: Expecting ',' delimiter: line 1 column 8193 (char 8192)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 214, in play_one_game
    self.receive_game_state_update(block=True, perform_callbacks=False)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 1 column 8193 (char 8192)
2024-12-21 18:38:20,852 - ERROR - An error occurred: Expecting value: line 1 column 1 (char 0)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 214, in play_one_game
    self.receive_game_state_update(block=True, perform_callbacks=False)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-12-21 18:38:51,186 - ERROR - An error occurred: Expecting ':' delimiter: line 1 column 8195 (char 8194)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 214, in play_one_game
    self.receive_game_state_update(block=True, perform_callbacks=False)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ':' delimiter: line 1 column 8195 (char 8194)
2024-12-21 18:42:11,057 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 18:42:56,810 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 18:43:50,706 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 18:44:01,947 - ERROR - An error occurred: Invalid command: start. Possible commands: [choose, return, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 60, in handle_error
    raise Exception(error)
Exception: Invalid command: start. Possible commands: [choose, return, key, click, wait, state]
2024-12-21 18:45:14,236 - ERROR - An error occurred: Expecting value: line 1 column 1 (char 0)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 214, in play_one_game
    self.receive_game_state_update(block=True, perform_callbacks=False)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-12-21 19:49:07,909 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 19:49:11,818 - ERROR - An error occurred: Expecting value: line 1 column 1 (char 0)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-12-21 19:55:46,097 - ERROR - An error occurred: 'NoneType' object has no attribute 'to_dict'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 66, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 290, in handle_screen
    return self.make_map_choice()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 463, in make_map_choice
    tree_dict = current_node.to_dict()
                ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'to_dict'
2024-12-21 20:00:16,583 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 20:00:28,175 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 20:09:44,865 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 20:09:52,782 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-21 20:22:59,396 - ERROR - An error occurred: unsupported operand type(s) for +: 'dict' and 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 180, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 67, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 291, in handle_screen
    return self.make_map_choice()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 478, in make_map_choice
    file.write(current_node.to_dict() + "\n")
               ~~~~~~~~~~~~~~~~~~~~~~~^~~~~~
TypeError: unsupported operand type(s) for +: 'dict' and 'str'
2024-12-21 20:23:49,910 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-22 00:05:28,173 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:05:31,779 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:05:35,111 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:37,924 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:40,934 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:44,251 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:47,609 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:49,367 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:53,647 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:58,099 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:05:59,968 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:06:03,179 - ERROR - An error occurred: Invalid command: ```. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: ```. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:06:07,098 - ERROR - An error occurred: Invalid command: ```. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: ```. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:06:49,916 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:06:53,191 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:06:56,620 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:06:59,939 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:02,578 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:04,907 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:09,490 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:11,085 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:14,554 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:18,816 - ERROR - An error occurred: Invalid command: start. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: start. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:20,360 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:23,799 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:27,270 - ERROR - An error occurred: Invalid command: {. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: {. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:31,516 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:35,020 - ERROR - An error occurred: Invalid command: ```. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: ```. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:36,920 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:40,168 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:07:43,569 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:20,528 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:08:22,076 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:08:25,529 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:29,730 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:31,820 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:34,725 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:38,010 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:41,488 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:43,219 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:48,295 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:50,048 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:54,333 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:08:57,031 - ERROR - An error occurred: Invalid command: {. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: {. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:09:01,445 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:09:05,148 - ERROR - An error occurred: Invalid command: ```. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: ```. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:11:49,778 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:11:53,775 - ERROR - An error occurred: Invalid command: . Possible commands: [start, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [start, state]
2024-12-22 00:11:55,798 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:11:59,341 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:03,601 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:06,097 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:09,641 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:13,139 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:18,742 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:22,161 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:26,124 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:31,570 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:35,308 - ERROR - An error occurred: Invalid command: }. Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: }. Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:40,046 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:47,653 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:51,820 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 00:12:58,702 - ERROR - An error occurred: Invalid command: . Possible commands: [choose, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 217, in play_one_game
    self.receive_game_state_update(block=True)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Invalid command: . Possible commands: [choose, key, click, wait, state]
2024-12-22 14:56:22,142 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 50, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-22 15:17:47,690 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 50, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 63, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.
2024-12-22 15:19:50,603 - ERROR - An error occurred: Expecting value: line 1 column 1 (char 0)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 50, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 214, in play_one_game
    self.receive_game_state_update(block=True, perform_callbacks=False)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 165, in receive_game_state_update
    communication_state = json.loads(message)
                          ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2024-12-22 15:55:57,396 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 64, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.
2024-12-22 16:10:12,984 - ERROR - An error occurred: Selected card requires an enemy target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 41, in <module>
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 64, in handle_error
    raise Exception(error)
Exception: Selected card requires an enemy target.

 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!

2024-12-22 17:35:57,399 - ERROR - An error occurred: Invalid command: play. Possible commands: [proceed, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 176, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 64, in handle_error
    raise Exception(error)
Exception: Invalid command: play. Possible commands: [proceed, key, click, wait, state]
2024-12-22 18:22:42,090 - ERROR - An error occurred: Invalid command: play. Possible commands: [proceed, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 175, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 64, in handle_error
    raise Exception(error)
Exception: Invalid command: play. Possible commands: [proceed, key, click, wait, state]
2024-12-22 23:04:54,996 - ERROR - An error occurred: Expecting ',' delimiter: line 3 column 2 (char 24)




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 88, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 184, in get_play_card_action
    jsonfile = json.loads(json_text)
               ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
               ^^^^^^^^^^^^^^^^^^^^^^
json.decoder.JSONDecodeError: Expecting ',' delimiter: line 3 column 2 (char 24)
unable to parse json_text:{
	"isToEndTurn": "No"
	"cardName": "Strike"
	"targetIndex": 0
	"explanation": "I will play 'Strike' targeting SpikeSlime_S to try and reduce its HP since it has low health remaining. Playing an attack card is beneficial in this situation to quickly eliminate the weaker enemy before it becomes stronger."
}
unable to parse json_text:{
	"isToEndTurn": "No"
	"cardName": "Rage",
	"targetIndex": -1,
	"explanation": "Playing Rage is beneficial as it will grant you 6 block and apply 1 Vulnerable to the enemy. Given that you have 0 energy and no other options, this can help mitigate some of the incoming damage from the SpikeSlime_S."
}

 the card must have a target!!!!!!!!!

unable to parse json_text:{
	"isToEndTurn": "No"
	"cardName": "Power Through"
	"targetIndex": -1
	"explanation": "Playing 'Power Through' would be beneficial as it provides 15 block, helping to mitigate potential damage from the enemies. Given the current low block and HP, prioritizing defense in this turn is important to sustain longer in the combat."
}
unable to parse json_text:{
	"isToEndTurn": "No"
	"cardName": "Perfected Strike"
	"targetIndex": 1
	"explanation": "I will play Perfected Strike card to target the Cultist enemy. This card deals damage based on the number of cards containing 'Strike' in the discard pile, which currently has 1 'Strike' card. Targeting the Cultist, who has higher HP, will help to reduce their health significantly."
}
unable to parse json_text:{
	"isToEndTurn": "No"
	"cardName": "Die Die Die"
	"targetIndex": -1
	"explanation": "The enemy JawWorm has low health, using Die Die Die card with 3 energy will deal significant damage and help in eliminating the enemy quickly. Since it's an AOE card, it will damage the enemy even if it has block."
}
2024-12-23 00:03:31,689 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-23 01:09:39,113 - ERROR - An error occurred: 'ConversationSummaryBufferMemory' object has no attribute 'get_next_version'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 42, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 88, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 175, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1605, in stream
    with SyncPregelLoop(
         ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\loop.py", line 806, in __init__
    self.checkpointer_get_next_version = checkpointer.get_next_version
                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 856, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ConversationSummaryBufferMemory' object has no attribute 'get_next_version'

 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!

2024-12-23 13:48:28,147 - ERROR - An error occurred: Selected card cannot be played with the selected target.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 50, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 175, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 64, in handle_error
    raise Exception(error)
Exception: Selected card cannot be played with the selected target.

 the card must have a target!!!!!!!!!

2024-12-24 13:28:07,988 - ERROR - An error occurred: Invalid format specifier ' List  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 391, in make_grid_choice
    {
ValueError: Invalid format specifier ' List  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'
2024-12-24 13:31:45,802 - ERROR - An error occurred: Invalid format specifier ' []  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 391, in make_grid_choice
    {
ValueError: Invalid format specifier ' []  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'
2024-12-24 13:33:26,454 - ERROR - An error occurred: Invalid format specifier ' List[int]  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 391, in make_grid_choice
    {
ValueError: Invalid format specifier ' List[int]  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'
2024-12-24 13:47:45,341 - ERROR - An error occurred: Invalid format specifier ' List[int]  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 391, in make_grid_choice
    {
ValueError: Invalid format specifier ' List[int]  // the list of Indexes of your chosen cards form Available Cards
                    "explanation": string  // your reason
                ' for object of type 'str'
2024-12-24 13:50:16,812 - ERROR - An error occurred: '\n                    "cardIndexes"'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 398, in make_grid_choice
    messages = template1.format_messages()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 612, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 647, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\prompt.py", line 183, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: '\n                    "cardIndexes"'
2024-12-24 14:20:55,504 - ERROR - An error occurred: 'relics'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 71, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 339, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 408, in make_grid_choice
    messages = template1.format_messages(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 612, in format_messages
    return [self.format(**kwargs)]
            ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\chat.py", line 647, in format
    text = self.prompt.format(**kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\prompts\prompt.py", line 183, in format
    return DEFAULT_FORMATTER_MAPPING[self.template_format](self.template, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 190, in format
    return self.vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\utils\formatting.py", line 33, in vformat
    return super().vformat(format_string, args, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 194, in vformat
    result, _ = self._vformat(format_string, args, kwargs, used_args, 2)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 234, in _vformat
    obj, arg_used = self.get_field(field_name, args, kwargs)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 299, in get_field
    obj = self.get_value(first, args, kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\string.py", line 256, in get_value
    return kwargs[key]
           ~~~~~~^^^^^
KeyError: 'relics'
wrong index list from "make_grid_choice"wrong index list from "make_grid_choice"2024-12-24 14:24:37,526 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-24 14:50:11,234 - ERROR - An error occurred: '>' not supported between instances of 'int' and 'str'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 51, in <module>
    result = coordinator.play_one_game(PlayerClass.DEFECT)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 76, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 344, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 459, in make_grid_choice
    if len(available_cards) > index >= 0:
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '>' not supported between instances of 'int' and 'str'
unable to parse json_text:{
	"cardIndexes": [0],  // Choosing the first Strike card for purge
	"explanation": "I chose to purge one Strike card because the current deck is heavily weighted with Strikes, which can lead to a lack of variety in card draws. By removing one Strike, we can improve the chances of drawing more diverse cards in future turns, which can help in adapting to different combat situations. Additionally, since we have a strong attack card in Clothesline and Bash, we can afford to lose one basic Strike."
}
unable to parse json_text:{
	"cardIndexes": [11],  // Index of "Armaments"
	"explanation": "Upgrading Armaments is a strategic choice as it allows you to upgrade all cards in your hand for the turn, making it a powerful tool for enhancing your damage output and defense. Given that your deck has several attack and defense cards, upgrading Armaments will provide significant value by improving your overall card effectiveness during battles."
}
unable to parse json_text:{
	"cardIndexes": [0],  // Choosing the first Strike card for purge
	"explanation": "I chose to purge one of the Strike cards because the deck already has a high number of Strike cards (5 total). Removing one will help reduce redundancy and improve the overall balance of the deck. This will allow for more diverse card draws, increasing the chances of drawing defensive or utility cards like Neutralize or Quick Slash, which can be more beneficial in combat."
}
unable to parse json_text:{
	"cardIndexes": [10],  // Index of Quick Slash in Available Cards
	"explanation": "Upgrading Quick Slash increases its damage from 5 to 7 and retains its draw effect. This is beneficial as it allows for more card cycling while dealing more damage, which is crucial for maintaining pressure on enemies, especially given the current health situation."
}
unable to parse json_text:{
	"cardIndexes": [0],  // Choosing the first Strike card for purge
	"explanation": "The current deck has an excess of Strike cards, which are all identical and do not provide any variety or strategic options. Purging one Strike card will help reduce redundancy in the deck, allowing for a more balanced draw in future turns. This will also make room for potentially more useful cards that can be acquired later."
}
unable to parse json_text:{
	"cardIndexes": [10],  // Index of Cleave
	"explanation": "I chose to upgrade Cleave because it is an AoE (Area of Effect) attack that can deal damage to all enemies. Upgrading it increases its damage output, making it more effective in clearing multiple enemies, which is crucial in the later stages of the game. Given the current deck composition, enhancing Cleave will provide better crowd control and help maintain health by reducing the number of threats on the board."
}
unable to parse json_text:{
	"cardIndexes": [10],  // Index of Cleave in the Available Cards list
	"explanation": "I chose to upgrade Cleave because it is an AoE (Area of Effect) attack that can deal damage to all enemies. Upgrading it increases its damage output, making it more effective in multi-enemy encounters, which are common in 'Slay the Spire'. Given the current deck composition, enhancing Cleave will provide better crowd control and help manage multiple foes more efficiently."
}
unable to parse json_text:{
	"cardIndexes": [8],  // Index of "Cleave"
	"explanation": "I chose to upgrade 'Cleave' because it is an AoE (Area of Effect) attack that can deal damage to all enemies. Upgrading it increases its damage output, making it more effective in clearing multiple enemies, especially in encounters with groups. Given the current deck composition, enhancing 'Cleave' will provide better crowd control and help manage threats more efficiently."
}
unable to parse json_text:{
	"cardIndexes": [3],  // Index of the card "Defend"
	"explanation": "I chose to purge one of the 'Defend' cards because the deck already has four 'Defend' cards, which can lead to a lack of offensive options during battles. Since the deck has a good number of attack cards, removing a 'Defend' will help streamline the deck and increase the chances of drawing more offensive cards, improving overall damage output."
}
unable to parse json_text:{
	"cardIndexes": [8],  // Index of "Cleave"
	"explanation": "Upgrading Cleave is a strong choice because it increases its damage output and retains its ability to hit all enemies. This is particularly useful in multi-enemy encounters, allowing for efficient crowd control. Given the current deck composition, enhancing Cleave will provide a significant boost to damage potential while maintaining versatility."
}
2024-12-24 21:35:38,592 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-24 21:44:35,354 - ERROR - An error occurred: Invalid command: play. Possible commands: [proceed, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 175, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 70, in handle_error
    raise Exception(error)
Exception: Invalid command: play. Possible commands: [proceed, key, click, wait, state]

 the card must have a target!!!!!!!!!

2024-12-24 22:04:06,536 - ERROR - An error occurred: list index out of range




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 94, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 228, in get_play_card_action
    target1 = available_monsters[target_index]
              ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
IndexError: list index out of range

 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!

2024-12-25 13:34:02,184 - ERROR - An error occurred: Must provide a card for CardRewardAction if not choosing the Singing Bowl




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 76, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 309, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 567, in choose_card_reward
    return CardRewardAction(card_to_choose)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 202, in __init__
    raise Exception("Must provide a card for CardRewardAction if not choosing the Singing Bowl")
Exception: Must provide a card for CardRewardAction if not choosing the Singing Bowl
2024-12-25 13:58:26,489 - ERROR - An error occurred: list index out of range




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 94, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 228, in get_play_card_action
    target1 = available_monsters[target_index]
              ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
IndexError: list index out of range

 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!


 the card must have a target!!!!!!!!!

2024-12-25 20:44:24,822 - ERROR - An error occurred: Invalid command: play. Possible commands: [proceed, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 175, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 70, in handle_error
    raise Exception(error)
Exception: Invalid command: play. Possible commands: [proceed, key, click, wait, state]

 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No"
	"cardIndex": 0
	"targetIndex": 0
	"explanation": "I will play Strike against the first Sentry enemy (10/38) to deal damage. The enemy has low HP, and I want to focus on eliminating it quickly. Also, there is no need to use a skill card or defend as the other enemies are not attacking this turn."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No"
	"cardIndex": 2
	"targetIndex": -1
	"explanation": "I will play Backflip+ card to draw 2 cards and gain 5 block. Since the Guardian has an attack intent, it's important to gain some block to mitigate the incoming damage. Backflip+ also helps me cycle through my deck for better card options in the next turns."
}
2024-12-25 21:24:34,043 - ERROR - An error occurred: Action.can_be_executed() missing 1 required positional argument: 'coordinator'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Action.can_be_executed() missing 1 required positional argument: 'coordinator'
2024-12-25 21:27:15,368 - ERROR - An error occurred: Action.can_be_executed() missing 1 required positional argument: 'coordinator'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Action.can_be_executed() missing 1 required positional argument: 'coordinator'

 the card must have a target!!!!!!!!!,targetIndex is 2


 the card must have a target!!!!!!!!!,targetIndex is 3

2024-12-26 19:08:59,081 - ERROR - An error occurred: Error code: 400 - {'code': 20012, 'message': 'Model does not exist. Please check it carefully.', 'data': None}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 79, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 347, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 429, in make_grid_choice
    responses = self.common_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'code': 20012, 'message': 'Model does not exist. Please check it carefully.', 'data': None}
During task with name 'agent' and id '8ae863eb-3408-7d2f-695a-104973edc6ba'
unable to parse json_text:, I've got this decision to make in Slay the Spire, and I need to choose from the available cards or decide whether to use the relic "Bowl" to improve my max HP. Let's see what I've got.

First, my current deck consists of:

- Strike x5

- Defend x4

- Bash x1

So, that's a total of 10 cards. I have 80/80 health, which is good, and I don't have the relic Bowl, so that's not an option right now. The available cards are Clash, Pommel Strike, and Shockwave. I need to decide which one of these to add to my deck, or whether to skip and not add any.

Let me look into each card:

1. **Clash:**

- This is a skill card that deals damage equal to your strength and applies vulnerability to the enemy.

- It also gives you draw and energy.

- Seems versatile, offering both damage and a debuff.

2. **Pommel Strike:**

- An attack card that deals damage and has a chance to apply weakness.

- It also has a block component.

- So, it's a combination of attack, defense, and potential debuff.

3. **Shockwave:**

- An attack card that deals damage to all enemies and has a chance to apply vulnerability.

- It also generates energy.

- This seems like a good area-of-effect damage card.

Now, considering my current deck:

- I have a lot of Strike cards, which are basic attacks.

- Four Defends for defense.

- One Bash, which is probably for additional damage or effects.

- So, my deck is pretty basic and needs some variety and power-ups.

I need to think about what these cards will add to my deck:

- **Clash:** Adds versatility with damage, vulnerability, draw, and energy.

- **Pommel Strike:** Combines attack, block, and a chance to apply weakness.

- **Shockwave:** Offers area-of-effect damage and vulnerability, plus energy generation.

Given that I have plenty of Strikes, which are likely my main damage dealers, adding another attack card might not be the best use of deck space unless it offers significant benefits.

Let me consider the synergy with my current cards:

- Since I have multiple Strikes, maybe some cards that benefit from having multiple identical cards in hand or in play.

- However, none of the available cards directly benefit from Strikes.

- Perhaps I should look into diversifying my deck to include different types of cards for better flexibility.

Health management:

- I'm at full health, so no immediate need for healing cards.

- But it's always good to have some form of health management in case I take damage later.

Deck size management:

- My deck is already at 10 cards.

- Adding another card will make it bigger, which could dilute the consistency of drawing specific cards.

- However, in early game, a larger deck might be acceptable as I'm still building my strategy.

Card rarity:

- All three cards seem to be uncommon or higher, offering unique abilities.

- So, they are likely to be stronger than common cards.

Synergy with archetypes:

- As the Silent, I can focus on poison or stealth builds, but these cards don't directly align with that.

- Maybe I can consider building towards a combo or buff deck.

Scaling:

- I need cards that will remain effective as the game progresses.

- Area-of-effect damage like Shockwave could be useful against multiple enemies in later acts.

- Vulnerability and weakness debuffs can help deal more damage over time, which is beneficial in longer fights.

Considering all this, I'm leaning towards Shockwave because:

- It offers area-of-effect damage, which is useful against multiple enemies.

- It applies vulnerability, which can increase the damage I deal.

- It generates energy, which helps me play more cards in a turn.

Pommel Strike also seems attractive because it combines attack and defense, but since I already have Defend cards, I might not need another block card immediately.

Clash offers a mix of effects, but it might be a bit scattered for my current needs.

Therefore, I think choosing Shockwave would be the best option at this stage.

**Final Decision**

To make the best choice for my deck, I've evaluated the available cards against my current deck composition, health status, and future scaling potential. After considering the benefits of each card, I've decided to add **Shockwave** to my deck.

**Explanation**

- **Deck Composition:** My current deck is heavy on basic attack and defense cards, lacking variety and synergistic effects.

- **Card Analysis:**

- **Clash:** Offers versatility but may not significantly enhance my current strategy.

- **Pommel Strike:** Combines attack and defense, but I already have Defend cards.

- **Shockwave:** Provides area-of-effect damage and vulnerability, which can increase overall damage output.

- **Future Scaling:** Shockwave's area-of-effect damage and energy generation will remain useful in later stages of the game.

- **Health Management:** Since I'm currently at full health, prioritizing damage and efficiency over immediate healing.

- **Deck Size Management:** Adding Shockwave increases deck size, but its benefits outweigh the potential dilution in early game.

- **Relic Bowl:** Not available, so it's not an option at this time.

By adding Shockwave to my deck, I aim to enhance my damage potential, especially against multiple enemies, and improve my energy management for more flexible card usage in upcoming battles.

**Final Output**

\[ \boxed{\text{Shockwave}} \
unable to parse json_text:, I need to choose the next level node from the given options: Enemy(0,0), Enemy(2,0), and Enemy(4,0). Let's see what each of these might entail.

First off, all three options are labeled as "Enemy," which suggests that each is a combat encounter. Since I'm at full health (80/80), I'm in a good position to take on some challenges. However, I should consider the potential risks and rewards of each path.

Looking at the map tree, the current position is at (4,0), and from there, the children are at (0,0), (2,0), and (4,0). Each of these has further branches, but for now, I'm focusing on the immediate next step.

Option 1: Enemy(0,0)

This seems to be the leftmost path. Looking at the tree, Enemy(0,0) has children that lead to more enemies, and eventually, there might be other types of nodes like "Unknown." However, it's mostly a straight line of enemies.

Option 2: Enemy(2,0)

This is the middle path. It also leads to more enemies and potentially some "Unknown" nodes, which could be anything―maybe beneficial like a Merchant or Treasure, or challenging like an Elite enemy.

Option 3: Enemy(4,0)

This is the rightmost path. It also branches into more enemies and an "Unknown" node.

Given that all options are enemy encounters, and I'm at full health, I need to think about which path might offer the best balance of challenge and reward.

Considering that I have the Burning Blood relic, which likely enhances my abilities in combat, I might be better equipped to handle tougher enemies. Perhaps one of the paths leads to an Elite enemy, which could be more challenging but also potentially more rewarding.

However, from the map tree, all three paths seem to lead to multiple enemy encounters, with the possibility of encountering "Unknown" nodes later on.

I should also consider my current deck composition. I have multiple Strike and Defend cards, with a single Bash card. This seems like a standard setup for early game, focusing on balance between attack and defense.

Given that, I might want to choose a path that allows me to level up my deck gradually by facing multiple enemies in a row, possibly farming for cards or gold to purchase upgrades.

Alternatively, I might want to conserve my health and resources by choosing a path that minimizes the number of fights, focusing on reaching a Merchant or Treasure node sooner.

But since I'm at full health and have a strong relic, I think I can afford to take on more enemies.

Looking back at the map tree, all three paths have similar structures, with multiple enemy nodes before reaching an "Unknown" node.

Perhaps I should consider the path that offers the most enemy encounters for farming purposes.

Option 1: Enemy(0,0)

This path has a direct sequence of enemies, which might be efficient for leveling up my deck quickly.

Option 2: Enemy(2,0)

This path also has multiple enemies, but there's an "Unknown" node branching off earlier, which could be beneficial if it's a Merchant or Treasure.

Option 3: Enemy(4,0)

Similar to the others, with multiple enemies and an "Unknown" node.

Given that, I might lean towards Option 1: Enemy(0,0), as it seems to have a straight line of enemies, which could be good for farming and leveling up my deck.

However, I should also consider that too many enemy encounters in a row could deplete my health, even with my relic's benefits.

Alternatively, choosing Option 2 or 3 might allow me to reach an "Unknown" node sooner, which could be beneficial if it turns out to be a Merchant or Treasure.

Given that I'm at full health and have a strong relic, I think I can risk taking on more enemies to potentially level up my deck and prepare for harder challenges ahead.

Therefore, I'll choose Option 1: Enemy(0,0).

**Final Answer**

\[ \boxed{0} \
unable to parse json_text:, I'm in combat on floor 1, turn 1. My current HP is 80/80, and I have no block. I have 3 energy available. I have a relic called Burning Blood. In my hand, I have the following cards:

- Strike (1, True)

- Bash (2, True)

- Strike (1, True)

- Defend (1, False)

- Defend (1, False)

There are two enemies: FuzzyLouseNormal, each with 15/15 HP, and their intent is DEBUG, with 0 block, and they have a status called Curl Up with values 7 and 6, respectively.

My draw pile includes:

- Defend (1, False)

- Strike (1, True)

- Defend (1, False)

- Strike (1, True)

- Strike (1, True)

My discard pile is empty, and I have no player status or orbs.

First, I need to understand the current situation. Since it's turn 1, and both enemies have DEBUG intent, which likely means they won't attack this turn, or perhaps their actions are unknown. However, they have a status called Curl Up with values 7 and 6. I need to find out what Curl Up does. Since it's a status, it might affect their behavior or the damage they deal.

Given that, I should consider my options for this turn. My goal is to minimize damage and ideally set up advantageous positions for future turns.

Looking at my hand:

- Strike: cost 1, deals damage.

- Bash: cost 2, likely deals more damage or has additional effects.

- Defend: cost 1, generates block.

Since the enemies aren't attacking this turn, or at least their intent is DEBUG, I might not need to worry about taking damage immediately. However, I should prepare for the next turn when they might attack.

One strategy could be to build up block now to prepare for potential damage next turn. Alternatively, I could try to deal damage to reduce their HP before they can attack.

Given that I have 3 energy, I could play one Bash (cost 2) and one Strike (cost 1), totaling 3 energy, dealing damage to one enemy. Or I could play three Defends, generating block, but since the enemies aren't attacking this turn, that might not be necessary.

Wait, but if I generate block now, and the enemies attack next turn, I'll have that block to absorb some damage. However, since I have two enemies, I need to consider that both might attack me next turn.

Let me think about the relic I have: Burning Blood. I need to know what it does. If it's a power that deals damage over time or something similar, that could influence my decisions.

Unfortunately, I don't have specific information about what Burning Blood does, so I'll have to make assumptions. If it's a power that deals damage, I might want to save energy for playing cards that synergize with it or simply focus on building up my own defenses.

Another consideration is the Curl Up status. If Curl Up reduces the damage they take or something similar, I might need to find a way to remove or bypass it.

Given that, perhaps I should focus on dealing damage this turn to reduce their HP before their Curl Up status can protect them next turn.

Alternatively, if Curl Up is a protective status, maybe I should try to remove it or find a way to ignore it.

Since I don't have cards that can remove status effects, I might need to rely on dealing enough damage to overcome the protection provided by Curl Up.

Given that, perhaps playing Bash on one enemy and Strike on the other would be a good strategy, spreading the damage between the two enemies.

However, I need to consider the values in the Curl Up status: 7 and 6. If Curl Up reduces damage by that amount, then my attacks might not deal as much damage as usual.

For example, if Curl Up reduces damage by 7, then a Strike that normally deals 6 damage would only deal 6 - 7 = -1, which means no damage is dealt. Similarly, Bash might deal higher damage, but it's still reduced by the Curl Up value.

Therefore, I need to know the actual damage values of my cards and how they interact with Curl Up.

Assuming Strike deals 6 damage and Bash deals 9 damage, then against an enemy with Curl Up 7, Strike would deal 6 - 7 = -1 (no damage), and Bash would deal 9 - 7 = 2 damage.

Against the enemy with Curl Up 6, Strike would deal 6 - 6 = 0 damage, and Bash would deal 9 - 6 = 3 damage.

So, playing Bash on each enemy would deal 2 and 3 damage, respectively, which isn't much, but it's better than nothing.

Alternatively, I could play two Strikes on one enemy, but since they don't deal damage due to Curl Up, it's not effective.

Wait, perhaps I should consider that Curl Up might have a duration, and playing attacks might reduce its value or remove it.

However, without knowing the exact mechanics of Curl Up, it's hard to plan.

Another option is to focus on generating block this turn, so that when the enemies attack next turn, I have some protection.

Given that, I could play three Defends, generating 6 block (assuming each Defend generates 2 block), using all my 3 energy.

Then, next turn, if both enemies attack, their attacks would be reduced by my block.

Given that, perhaps it's better to build up block now and deal with the enemies next turn.

But, considering that the enemies have DEBUG intent this turn, maybe they won't attack, and I can deal some damage without taking any back.

However, I need to be cautious, as I don't know what DEBUG intent means exactly.

Given that, perhaps a balanced approach: play one Bash on one enemy and one Defend to generate some block.

That way, I deal some damage and also prepare for potential attacks next turn.

Let me consider the energy costs:

- Bash: 2 energy

- Defend: 1 energy

Total: 3 energy

After playing these, I would have no energy left.

Now, which enemy should I target with Bash?

Both enemies have 15 HP and Curl Up 7 and 6, respectively.

If I play Bash on the first enemy with Curl Up 7, it would deal 2 damage (assuming Bash deals 9 - 7 = 2).

On the second enemy with Curl Up 6, it would deal 3 damage (9 - 6 = 3).

So, targeting the second enemy with higher damage seems better.

But, if Curl Up has a duration, perhaps reducing its value each turn, it might be better to target the one with higher Curl Up value to reduce it sooner.

However, without knowing the exact mechanics, it's hard to decide.

Alternatively, perhaps I should target the enemy with the higher Curl Up value first, thinking that reducing their protection might make them easier to damage in future turns.

But again, without knowing how Curl Up works, it's speculative.

Another thought: if Curl Up is a status that lasts multiple turns, reducing its value each turn, then targeting the one with higher Curl Up value might be better in the long run.

Alternatively, if it's a per-attack reduction, then targeting the one I can deal more damage to might be better.

Given that, perhaps targeting the enemy with Curl Up 6, where Bash deals 3 damage, is better than targeting the one with Curl Up 7, where Bash deals only 2 damage.

So, I'll choose to play Bash on the second enemy, dealing 3 damage, and Defend to generate block.

Then, next turn, even if both enemies attack, my block should absorb some of the damage.

Additionally, if Curl Up is reduced or removed by my attacks, future attacks might deal more damage.

Given that, I think this is a reasonable plan for this turn.

Now, in terms of implementation, I need to specify the card indices and target indices.

Looking back at the context:

Hand pile: [ Strike(1,True), Bash(2,True), Strike(1,True), Defend(1,False), Defend(1,False) ]

So, card indices are 0: Strike, 1: Bash, 2: Strike, 3: Defend, 4: Defend

Enemy list: [ FuzzyLouseNormal(15/15, DEBUG, 0, [Curl Up(7)]), FuzzyLouseNormal(15/15, DEBUG, 0, [Curl Up(6)]) ]

So, enemy indices are 0 and 1.

I need to play Bash on enemy 1 (Curl Up 6) and Defend, targeting no one since Defend doesn't have a target.

So, cardIndex: 1 (Bash) and targetIndex: 1 (second enemy)

Then, cardIndex: 3 (Defend) and targetIndex: -1 (no target)

Explanation:

- Played Bash on the second enemy to deal 3 damage, exploiting the lower Curl Up value.

- Played Defend to generate block, preparing for potential attacks in the next turn.

- Used up all 3 energy, maximizing the use of available resources.

I think this is a solid strategy for this turn, balancing offense and defense while accounting for the unknowns in enemy behavior.

**Final Answer**

To make the best move in this combat scenario, I need to carefully consider my options based on the current context. Here's my plan:

1. **Assess the Situation:** I'm on floor 1, turn 1, with full HP (80/80) and no block. I have 3 energy available and a relic called Burning Blood, whose effects are unknown but potentially beneficial.

2. **Hand Cards Analysis:** My hand consists of:
   - Strike (1, True): likely deals 6 damage.
   - Bash (2, True): likely deals higher damage or has additional effects.
   - Another Strike (1, True): same as above.
   - Defend (1, False): likely generates block.
   - Another Defend (1, False): same as above.

3. **Enemy Analysis:** There are two FuzzyLouseNormal enemies, each with 15 HP, DEBUG intent, 0 block, and a Curl Up status with values 7 and 6. Curl Up likely reduces damage taken by that amount.

4. **Strategy Decision:** Since it's the first turn and enemies have DEBUG intent, they might not attack. However, to be safe, I should prepare for potential attacks in the next turn by generating block while dealing some damage.

5. **Card Choices:**
   - Play Bash (2 energy) on the second enemy to deal 3 damage (since Curl Up reduces damage by 6).
   - Play Defend (1 energy) to generate block.

6. **Rationale:** By playing Bash on the second enemy, I deal more damage due to the lower Curl Up value (6 vs. 7). Playing Defend helps build block for potential attacks in the next turn.

7. **Implementation:** Select cardIndex 1 (Bash) and targetIndex 1 (second enemy), then cardIndex 3 (Defend) with targetIndex -1 (no target).

**Final Answer**

\[ \boxed{\text{json}} \

 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"wrong index list from "make_grid_choice"wrong index list from "make_grid_choice"wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:ex": 0,
	"explanation": "Choosing the 'Rest' node at coordinates (0,14) is the best option at this point. This node offers a chance to recover and prepare for the upcoming challenges. Given my current health at 47/80, resting can help me regain some health and manage my stamina for future battles. Additionally, the 'Rest' node typically provides opportunities to upgrade cards or relics, which can be beneficial for enhancing my deck and overall strategy. The presence of the 'Burning Blood' relic, which increases damage over time, and the 'Neow's Lament' relic, which can potentially provide a significant damage boost, makes resting particularly advantageous. Furthermore, the 'Bag of Marbles' and 'Ancient Tea Set' relics could offer unique advantages in battles or provide additional utility. Overall, resting at this node aligns with the strategy of conserving resources and preparing for future encounters."
wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"unable to parse json_text:d on the provided context, I would recommend choosing the node with index 1, which corresponds to the "Enemy" node at x=1, y=0.

This choice is the best option because it leads to a battle against an enemy, which can potentially result in the player gaining experience points (XP) and potentially improving their cards. Additionally, the node is located at the beginning of the map, which means that the player can potentially progress through the map more quickly compared to other nodes.

Furthermore, the player's current HP is at 80/80, which means that they are not in immediate danger. Choosing a node that leads to a difficult battle may not be necessary for progression at this point.

Overall, choosing the "Enemy" node at index 1 is the best option based on the current context

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:d on the provided context, the best next level to progress through is Merchant (Choice List index 2, 0).

Explanation:

1. Merchant is the only choice that offers a beneficial encounter (merchant) and has a lower chance of leading to difficult battles compared to the other choices.
2. The current HP is low, and progressing through a battle-heavy level may result in a significant decrease in health. Merchant offers a chance to purchase items that can help increase health.
3. The current deck is mostly composed of offensive cards, and Merchant offers a chance to acquire defensive cards that can help protect against enemy attacks.
4. The relic, Burning Blood, can be used to increase the damage dealt by offensive cards, which can be beneficial in the upcoming battles.

Therefore, progressing through Merchant is the best choice to maintain a healthy HP, acquire defensive cards, and increase the damage dealt by offensive cards

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"unable to parse json_text:d on the provided context, I would recommend choosing the "Elite" node (index 2) as the next level to progress through.

Explanation:

1. The "Elite" node offers a higher chance of encountering beneficial cards in the deck, which can help increase the player's overall power and progress through the game.
2. The "Elite" node is a more challenging encounter compared to the "Rest" node, which may lead to a higher chance of gaining experience points (XP) and potentially better rewards.
3. The "Elite" node is strategically located in the game tree, providing a more direct path to the higher-level "Treasure" node.

Choice List:
[Rest(1,5), Elite(2,5)]

The best choice is Elite(2,5) because it offers a higher chance of encountering beneficial cards in the deck and is strategically located in the game tree, providing a more direct path to the higher-level "Treasure" node
wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
    "isToEndTurn": "No",
    "cardIndex": 10,
    "targetIndex": -1,
    "explanation": "Facing a SpikeSlime\_L with an attack intention, I will play \"Strike\" to deal damage and potentially defeat the enemy. I will also play \"Defend\" to increase my block and protect myself from the enemy's attack."
}
unable to parse json_text:{
    "isToEndTurn": "No",
    "cardIndex": 10,
    "targetIndex": -1,
    "explanation": "Facing a SpikeSlime\_L with an attack intention and debuff, I will play \"Strike\" to deal damage and potentially defeat the enemy. The \"Strike\" card has a 1-cost and is upgradeable to \"Havoc+\" for 2 cost, which can further weaken the enemy. I will also play \"Flex\" to increase my block and prepare for future turns. My priority is to minimize the damage taken and maximize damage dealt, especially against enemies with high block. I will evaluate the enemy list and potential future turns to ensure I can apply status effects and synergies effectively."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
    "isToEndTurn": "No",
    "cardIndex": 1,
    "targetIndex": -1,
    "explanation": "Facing a SpikeSlime\_M with an attack intention, I will play Defend to gain a block and protect myself from the incoming attack. This will also allow me to play Twin Strike in the next turn to deal more damage."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"unable to parse json_text:index": 1,
	"explanation": "The Merchant node (index 1) is the best choice because it offers a high chance of obtaining a beneficial encounter (Treasure) and has a lower chance of encountering an enemy. Additionally, the current deck has several cards that can be used to defeat enemies, making the battle at the Merchant node more manageable. The Relic, Burning Blood, can also be used to gain an advantage in battles. Overall, the Merchant node provides a good balance of potential rewards and manageable battles, making it the best choice for progressing to the next level."

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"unable to parse json_text:d on the provided context, the best next level to progress through is:

{
	"index": 4,
	"explanation": "This node offers a challenging battle against an enemy, which will help you increase your HP and potentially acquire a new card from the encounter. Additionally, the enemy is located at the end of the current branch, making it a straightforward path to reach. Overall, this node provides a good opportunity to progress and potentially acquire a new card."

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
    "isToEndTurn": "No",
    "cardIndex": 1,
    "targetIndex": -1,
    "explanation": "Facing the AcidSlime\_M, I will play \"Strike\" to deal 1 damage. Then, I will play \"Defend\" to block their attack and end the turn."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:index": 1,
	"explanation": "The node Enemy(1,3) is the best choice because it leads to a battle against an Elite enemy, which can provide valuable resources and experience points. Additionally, the node is located closer to the current position, making it a more efficient choice for progressing through the map. The other node, Unknown(2,3), may lead to more exploration but may not offer as many benefits for the current context."
unable to parse json_text:{
    "isToEndTurn": "No",
    "cardIndex": 0,
    "targetIndex": -1,
    "explanation": "In this first turn, I will play \"Strike\" to deal damage to all enemies and potentially trigger their status effects. This will also allow me to test their abilities and decide which enemies to prioritize for elimination.\"
}
unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-26 23:32:30,193 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 0,
	"targetIndex": -1,
	"explanation": "On turn 4 of floor 4, with 68/80 HP and 0 block, I have 1 energy available. The enemy is a JawWorm with 6/43 HP, intent to DEFEND_BUFF, and 0 block. The hand contains Havoc, Defend, Strike, and another Defend. The draw pile has Bash, and the discard pile has Iron Wave, Defend, Strike, Strike, Defend, and Searing Blow. I have the Burning Blood relic and the Metallicize status effect with 3 charges remaining.

Given the low block and the enemy's DEFEND_BUFF intent, it's crucial to maximize damage while minimizing incoming damage. Havoc is a 1-cost card that deals 3 damage, which is a good choice to reduce the enemy's HP. Since Havoc doesn't require a target, I can play it without selecting a target index. Playing Havoc will help in reducing the enemy's health, aligning with the strategy to maximize damage when the enemy's HP is low. Additionally, having the Burning Blood relic might provide some defensive benefits, but since the enemy's intent is to DEFEND_BUFF, focusing on damage output is more effective at this stage.

I choose to play Havoc to deal 3 damage to the JawWorm, bringing its HP down to 3/43. This action aligns with the goal of minimizing damage taken and maximizing damage dealt, ensuring a better position for future turns."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 3,
	"targetIndex": -1,
	"explanation": "Given the current situation, I have a total of 3 energy points and need to make the most of them. The enemy, Lagavulin, has a high health of 110 and an Intent of STRONG_DEBUFF, which means it will apply a Weakened status effect. My current HP is 37/70, and I have 0 block, making me vulnerable to incoming damage. 

I have the following cards in my hand: Defend(1,False), Defend(0,False), Strike(1,True), Defend(1,False). Considering the enemy's high health and the fact that I have no block, it's crucial to mitigate incoming damage. The Defend cards are the most straightforward way to reduce incoming damage, but since I have 0 block, relying solely on Defend might not be sufficient.

Looking at the Draw Pile, there are several options like Backflip(1,False), Strike(1,True), Flying Knee(1,True), Defend(1,False), and Survivor(1,False). However, since I need to play a card from my Hand Pile, I'll focus on that.

The Strike(1,True) card seems like a good option because it allows me to attack the enemy, potentially dealing damage and weakening it further. Given that the enemy has a STRONG_DEBUFF intent, using Strike could help in reducing its overall threat. Additionally, having 3 energy points, I can afford to play this card without worrying about energy depletion.

Moreover, since the enemy has a high health, it's essential to deal significant damage to it to prevent it from dealing too much damage to me in subsequent turns. Using Strike(1,True) will not only attack the enemy but also weaken it, making it easier to handle in the future.

In summary, playing Strike(1,True) from my Hand Pile is the most strategic choice to maximize damage dealt to the enemy while managing my energy effectively. This action aligns with the goal of minimizing damage taken and maximizing overall combat effectiveness."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 2,
	"targetIndex": -1,
	"explanation": "On turn 3 of floor 5, with 69/75 HP and 0 block, I have 3 energy available. The enemy is a Cultist with 3/48 HP and an attack intent of 9. I have the following cards in my hand: Defend, Steam Barrier, Strike, Recursion, and another Strike. The draw pile includes Strike, Strike, Dualcast, Defend, and Zap. The discard pile is empty, and there are no player statuses. 

Given the enemy's high attack intent and low HP, it's crucial to maximize damage while minimizing incoming damage. Since I have 0 block, I need to ensure that my attacks are effective. The Recursion card could be beneficial here, as it allows me to play the same card multiple times, potentially increasing the damage output. However, considering the enemy's low HP, a single powerful attack might be sufficient to defeat it.

I choose to play the Strike card, which has a cost of 1 and is a basic attack. Since the targetIndex is -1, it implies that the Strike doesn't require a specific target. Playing this card will deal damage to the enemy, reducing its HP and increasing my chances of defeating it in this turn. Additionally, with 3 energy available, I can consider playing more cards in subsequent turns to maintain pressure on the enemy.

Overall, playing the Strike card is the most straightforward and effective choice given the current situation, as it directly addresses the enemy's threat without unnecessary complexity."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 00:21:16,929 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2024-12-27 00:32:13,249 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"cardIndexes": [1], // Upgrade Defend
	"explanation": "Upgrade Defend to improve its effectiveness. With the Ironclad's high health and armor, Defend can be a powerful card for mitigating damage. Upgrading it will increase its value in the later stages of the run."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"cardIndexes": [7],  // Purging one of the Defend cards to improve the deck's efficiency and flexibility.
	"explanation": "Purging one of the Defend cards is beneficial because it frees up space in the deck for more versatile cards. By removing a Defend card, we can potentially replace it with a more powerful or useful card that can contribute more to our strategy. This also allows us to cycle through our deck more effectively, ensuring that we have access to a diverse range of cards as we progress through the game."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 0,
	"targetIndex": -1,
	"explanation": "Given the current situation, I choose to play the 'Strike' card. My reasoning is as follows:

- **Block Management**: I currently have a block of 25, which is sufficient to handle the upcoming attack from the SpikeSlime_S with 11/14 HP.
- **Energy Conservation**: I have only 1 energy available, so I prioritize using it to maximize its impact.
- **Combat Strategy**: The enemy with the highest HP is the SpikeSlime_S, and it has an attack intention of 3. By playing the 'Strike' card, I can weaken it, which will be beneficial in the long run.
- **Card Effect**: The 'Strike' card deals damage to the enemy with the highest HP, which is the SpikeSlime_S. This will help me reduce its HP and potentially eliminate it in the next turn if it doesn't have any other effects that counteract the damage.
- **Future Strategy**: By weakening the SpikeSlime_S, I am also weakening the AcidSlime_S, which has a debuff status. This will make it easier to deal with in the future turns.
- **Card Cost**: The 'Strike' card has a cost of 1, which is ideal given my current energy situation.

In conclusion, playing the 'Strike' card is the best option to manage my block, conserve energy, and strategically weaken the enemy with the highest HP, which will have a cascading effect on the rest of the enemies on the field."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"cardIndexes": [6], // Upgrade the Defend card
	"explanation": "Upgrade the Defend card. With the current deck composition, having stronger Defend cards will help mitigate the damage from the enemy's attacks, especially considering the player's current health. Upgrading Defend will increase its cost and effectiveness, providing a better buffer against incoming damage. This choice aligns with the goal of maintaining a strong defense against the enemy's offensive plays."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 00:57:33,236 - ERROR - An error occurred: Connection error.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 72, in map_httpcore_exceptions
    yield
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 236, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 256, in handle_request
    raise exc from None
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http_proxy.py", line 316, in handle_request
    stream = stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http11.py", line 376, in start_tls
    return self._stream.start_tls(ssl_context, server_hostname, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_backends\sync.py", line 154, in start_tls
    with map_exceptions(exc_map):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1000)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 993, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 926, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 954, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 991, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 1027, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 235, in handle_request
    with map_httpcore_exceptions():
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1000)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 79, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 347, in handle_screen
    chosen_cards = self.make_grid_choice()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 441, in make_grid_choice
    responses = self.common_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1017, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1095, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1017, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1095, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1027, in _request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.
During task with name 'agent' and id '1f300937-ea22-3b5c-09ea-deb4d7b64ee2'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:ex": 1,
	"explanation": "The Enemy node at (5,13) is chosen because it offers a direct encounter which can be beneficial for gaining experience and potentially acquiring valuable cards or relics. Given the current deck and relics, the Enemy node presents a strategic opportunity to test the strength of the current deck and relic setup. The Enemy node also has a child node at (6,14) which could potentially lead to further progression, making it a promising choice for advancing the map."

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 2,
	"targetIndex": 0,
	"explanation": "I choose to play Pommel Strike. This card is a Power card, which means it will benefit me in all future turns. Given the current enemy situation, I prioritize Power cards as they can be used repeatedly throughout the game. The Acid Slime has a high HP, so I want to weaken it as much as possible before it has a chance to attack. By playing Pommel Strike, I can deal 1 damage to the Acid Slime and also gain 1 block, which will help protect me from its future attacks. Additionally, since Pommel Strike is a non-basic card, it doesn't trigger the enemy's "Defend" status, which means I can use my remaining energy to potentially play another card in the future."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 2,
	"targetIndex": 0,
	"explanation": "I choose to play Spot Weakness targeting the first enemy. This card is a Power card that costs 1 energy and has a chance to cause the enemy to miss its attack. This is beneficial because it can prevent the enemy from dealing damage, which is crucial in this situation. Since I have 3 energy available and I want to minimize the damage I take, I prioritize using defensive cards. Spot Weakness is a non-basic card, which means it's not "Defend" or "Strike", so it's a good choice to strengthen my later attacks."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 14:57:07,294 - ERROR - An error occurred: Invalid command: play. Possible commands: [proceed, key, click, wait, state]




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 175, in receive_game_state_update
    new_action = self.error_callback(self.last_error)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 73, in handle_error
    def handle_error(self, error):
        ^^^^^^^^^^^^^^^^^^^^^^
Exception: Invalid command: play. Possible commands: [proceed, key, click, wait, state]

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:rent situation is quite challenging, with a low HP and no block. The enemy Hexaghost has a high HP and intends to defend and buff itself. The goal is to weaken the enemy and increase my chances of survival. 

Given the available cards, "Shrug It Off" is a good choice as it can remove the buff effect from the enemy. However, since I have two "Shrug It Off" cards in my hand, I can play the second one to ensure the buff is removed. This will give me a chance to attack the enemy in the next turn. 

The "Anger" card can be played to gain a small amount of energy, which will be useful for future turns. 

The "Burn" card can be played to deal damage to the enemy, but since the enemy has high HP, it may not be effective. 

The "Perfected Strike" card is a powerful offensive card, but it requires 2 energy, which I currently don't have. 

The "Defend" card can be played to increase my block, but since the enemy has no attack intention this turn, it may not be necessary. 

The "Bash" card is a powerful offensive card, but it requires 2 energy, which I currently don't have. 

The "Havoc" card is a powerful offensive card, but it requires 1 energy, which I currently have. However, it may not be necessary to use it this turn as I have other offensive options available. 

The "Warcry" card is a powerful offensive card, but it requires 1 energy, which I currently have. However, it may not be necessary to use it this turn as I have other offensive options available. 

Based on the above analysis, I will play the "Shrug It Off" card to remove the buff effect from the enemy, and then play the "Anger" card to gain some energy for future turns. The "Burn" card can be played to deal some damage to the enemy. The "Perfected Strike" card can be drawn for future turns. The "Defend" card can be drawn for future turns. The "Bash" card can be drawn for future turns. The "Havoc" card can be drawn for future turns. The "Warcry" card can be drawn for future turns. 

Action: Play "Shrug It Off" card to remove the buff effect from the enemy. Then play "Anger" card to gain some energy for future turns. Finally, play "Burn" card to deal some damage to the enemy. Draw "Perfected Strike", "Defend", "Bash", "Havoc", and "Warcry" cards for future turns

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 15:55:32,373 - ERROR - An error occurred: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Shiv (Slay the Spire card)"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 187, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 690, in _generate
    return self._create_chat_result(response, generation_info)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 728, in _create_chat_result
    message = _convert_dict_to_message(res["message"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 134, in _convert_dict_to_message
    return AIMessage(
           ^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\ai.py", line 179, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\base.py", line 76, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Shiv (Slay the Spire card)"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type
During task with name 'agent' and id '064915eb-8b4d-8ace-0ecb-c8b33078aa86'
error occurs!!Invalid command: play. Possible commands: [proceed, key, click, wait, state]2024-12-27 16:03:36,651 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 17:19:14,044 - ERROR - An error occurred: '<=' not supported between instances of 'int' and 'NoneType'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 228, in get_play_card_action
    if 0 <= card_Index < len(playable_cards):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<=' not supported between instances of 'int' and 'NoneType'
2024-12-27 17:22:22,309 - ERROR - An error occurred: '<=' not supported between instances of 'int' and 'NoneType'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 228, in get_play_card_action
    if 0 <= card_Index < len(playable_cards):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<=' not supported between instances of 'int' and 'NoneType'
2024-12-27 17:23:37,428 - ERROR - An error occurred: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 187, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}
During task with name 'agent' and id '1f8fc7de-e0fc-9b05-cbb7-578b71adc149'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 18:53:13,603 - ERROR - An error occurred: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Flex card details"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 82, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 315, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 550, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 690, in _generate
    return self._create_chat_result(response, generation_info)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 728, in _create_chat_result
    message = _convert_dict_to_message(res["message"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 134, in _convert_dict_to_message
    return AIMessage(
           ^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\ai.py", line 179, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\base.py", line 76, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Flex card details"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type
During task with name 'agent' and id '54c01f10-476e-7091-168e-470133660c55'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2024-12-27 19:00:59,731 - ERROR - An error occurred: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Entrench Slay...he Spire card details"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 82, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 315, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 550, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 690, in _generate
    return self._create_chat_result(response, generation_info)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 728, in _create_chat_result
    message = _convert_dict_to_message(res["message"])
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 134, in _convert_dict_to_message
    return AIMessage(
           ^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\ai.py", line 179, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\messages\base.py", line 76, in __init__
    super().__init__(content=content, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 212, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for AIMessage
tool_calls.0.args
  Input should be a valid dictionary [type=dict_type, input_value='{"query": "Entrench Slay...he Spire card details"}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.9/v/dict_type
During task with name 'agent' and id 'f517d948-9e88-7cff-a284-c81ec660145d'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is 3

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 4,  // Index of the first Defend card in the hand pile
	"targetIndex": -1,  // Defend does not have a target
	"explanation": "I need to play Defend to gain 5 block and mitigate the incoming 19 damage from the Chosen, as I currently have 1 HP and no block."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

error occurs!!Invalid command: play. Possible commands: [proceed, key, click, wait, state]2025-01-01 23:57:57,511 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-01-01 23:59:49,544 - ERROR - An error occurred: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 187, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}
During task with name 'agent' and id '8d86bdda-ace1-6908-06b0-923639d7f74e'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

2025-01-02 00:14:19,813 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'

 the card must have a target!!!!!!!!!,targetIndex is -1

error occurs!!Invalid command: play. Possible commands: [proceed, key, click, wait, state]2025-01-02 00:28:25,884 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-01-02 00:54:44,348 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'

 the card must have a target!!!!!!!!!,targetIndex is -1

2025-01-02 01:35:49,092 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 219, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 112, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-01-27 20:18:55,152 - ERROR - An error occurred: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 43, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 220, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 179, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 100, in get_next_action_in_game
    return self.get_play_card_action()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 187, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1936, in invoke
    for chunk in self.stream(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1656, in stream
    for _ in runner.tick(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 167, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 408, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 176, in invoke
    ret = context.run(self.func, input, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\prebuilt\chat_agent_executor.py", line 558, in call_model
    response = model_runnable.invoke(state, config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 3024, in invoke
    input = context.run(step.invoke, input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\runnables\base.py", line 5354, in invoke
    return self.bound.invoke(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 286, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 786, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 643, in generate
    raise e
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 633, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 851, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 689, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 275, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions.py", line 829, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1280, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 957, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1061, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'code': 20037, 'message': 'Function call is not supported for this model.', 'data': None}
During task with name 'agent' and id 'd9503078-7579-824b-6d9e-ba46ea60fb72'

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 3,
	"targetIndex": -1,
	"explanation": "Given the current situation, I have a Hexaghost with high HP and an attack intention that includes DEBUFF. My current HP is 21/75, and I have 0 block, which means I'm vulnerable to incoming damage. I have 3 energy available and a hand of cards that include Self Repair, Reinforced Body, Leap, Overclock+, and Go for the Eyes+. 

First, I consider the enemy's attack intention. The Hexaghost has an attack intention of ATTACK_DEBUFF, which likely means it will apply a debuff that reduces my damage output or increases its own damage. Since I have 0 block, I need to prioritize defensive measures to mitigate the incoming damage.

Looking at my hand, Overclock+ is a Power card that can increase my energy, which might be useful for future turns. However, given the immediate threat, I need to focus on reducing the enemy's threat or enhancing my defenses.

Go for the Eyes+ is an AOE card that can deal damage to multiple enemies, but there's only one enemy here. Self Repair can restore my HP, which is beneficial, but it doesn't directly counter the enemy's attack intention. Reinforced Body could increase my block, but since I have 0 block currently, it might not be the most effective choice right now.

Leap is a movement card that allows me to move to a different enemy, but there's only one enemy, so it might not be necessary. Considering the enemy's high HP and attack intention, I need to neutralize its threat quickly.

Given these options, I decide to play Overclock+ to increase my energy, which can give me more flexibility in future turns. This choice allows me to prepare for the enemy's upcoming attack and potentially play more powerful cards in the next turn.

Alternatively, I could play Self Repair to restore some HP, but with only 3 energy and the need to conserve it for future turns, Overclock+ seems more strategic. It provides a long-term benefit by increasing my energy pool, which can be crucial for managing the enemy's high HP and potential future attacks.

In conclusion, playing Overclock+ enhances my energy, providing better flexibility and preparation for the upcoming turn, which is essential given the enemy's high attack intention and my current vulnerability.
unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 0,
	"targetIndex": -1,
	"explanation": "On turn 6 of floor 16, with 15/75 HP and 0 block, I have 3 energy available. The enemy is a Hexaghost with 157/250 HP, intent to DEFEND_BUFF, and 0 block. The hand contains Dualcast(1,False), Go for the Eyes+(0,True), Strike(1,True), and Leap(1,False). 

Given the enemy's high HP and intent to DEFEND_BUFF, I need to prioritize defensive measures to minimize incoming damage. Dualcast(1,False) allows me to play two cards for the cost of one, which can be beneficial for maximizing damage or defense. However, since the enemy is not attacking this turn, I can consider using it to play a defensive card first.

Go for the Eyes+(0,True) is a good option as it deals significant damage to the enemy's health. However, with only 3 energy, playing this card would leave me with minimal energy for future turns. 

Strike(1,True) is a basic attack that deals moderate damage and can be used to weaken the enemy. Leap(1,False) is a movement card and doesn't directly affect the enemy's health.

Considering the enemy's high HP and the need to conserve energy for future turns, I decide to play Dualcast(1,False) to play two cards. I'll start by playing Strike(1,True) to deal some damage and then use the second card to either play another Strike or a defensive card like Defend(1,False) to protect myself.

Alternatively, I could play Go for the Eyes+(0,True) to deal more damage upfront, but given the enemy's high block and the fact that it's not attacking this turn, it might not be the most efficient use of energy.

Therefore, I choose to play Dualcast(1,False) and use it to play two Strikes to maximize damage while conserving energy for future turns.
unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 4,  // Choosing the second Strike as it does high damage to the JawWorm
	"targetIndex": 0,  // JawWorm is the target with the highest damage
	"explanation": "The enemy, JawWorm, is defending and intends to buff itself, which means I won't take damage this turn. Since it has a status effect 'Vulnerable' for 1 turn, I can capitalize on this and deal damage now. The second Strike will do decent damage (6) combined with its vulnerability (effectively 9), which will significantly reduce its HP."
}
unable to parse json_text:{
	"isToEndTurn": "No",
	"cardIndex": 0,  // Choosing the first Defend card.
	"targetIndex": -1,  // No target since it’s a defensive card.
	"explanation": "I will play a Defend card to increase my block from 5 to 10, which reduces the damage I will take from The Guardian's attack this turn. It’s crucial to try to survive given I'm at 1 HP."
}

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

wrong index list from "make_grid_choice"
 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1


 the card must have a target!!!!!!!!!,targetIndex is -1

unable to parse json_text:

 the card must have a target!!!!!!!!!,targetIndex is -1

2025-05-11 17:40:36,900 - ERROR - An error occurred: ShopSelectAgent.invoke() missing 1 required positional argument: 'deck'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 372, in handle_screen
    ret =  self.make_shop_select_choice()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 508, in make_shop_select_choice
    responses = self.shop_select_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ShopSelectAgent.invoke() missing 1 required positional argument: 'deck'
2025-05-11 17:43:56,320 - ERROR - An error occurred: 'Strategy'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 372, in handle_screen
    ret =  self.make_shop_select_choice()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 508, in make_shop_select_choice
    responses = self.shop_select_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\shop_select_agent.py", line 368, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 548, in invoke
    input = step.invoke(input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\graph\graph.py", line 95, in _route
    return self._finish(writer, input, result, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\graph\graph.py", line 131, in _finish
    r if isinstance(r, Send) else self.ends[r] for r in result
                                  ~~~~~~~~~^^^
KeyError: 'Strategy'
During task with name 'Check' and id '0e2a4d19-4d5e-c014-5579-0501d86423e7'
2025-05-11 17:50:22,201 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-11 17:55:47,047 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid argument brimstone in command "choose brimstone".

2025-05-11 17:58:39,797 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-05-11 18:10:15,559 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-11 18:14:56,706 - ERROR - An error occurred: 'Coordinator' object has no attribute 'game'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 67, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 115, in execute_next_action_if_ready
    self.execute_next_action()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 107, in execute_next_action
    action.execute(self)
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\action.py", line 159, in execute
    if coordinator.game.are_potions_full():
       ^^^^^^^^^^^^^^^^
AttributeError: 'Coordinator' object has no attribute 'game'
error occurs!!:
Invalid command: end. Possible commands: [potion, key, click, wait, state]

2025-05-12 15:29:46,592 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 68, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-12 16:00:28,118 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 68, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: proceed. Possible commands: [start, state]

error occurs!!:
Invalid command: start. Possible commands: [choose, key, click, wait, state]

2025-05-12 16:09:55,927 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 68, in <module>
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-12 17:13:43,878 - ERROR - An error occurred: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull qwen3:8b`.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "LSIYNLGZDQJU")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 721, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 182, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull qwen3:8b`.
During task with name 'LLM' and id '26b888a5-9a18-b2f7-ed2e-2eb582d116e3'
2025-05-12 17:33:43,301 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-12 17:41:29,884 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-12 17:44:00,571 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-05-12 18:03:03,987 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-12 21:37:17,615 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-05-16 14:40:57,015 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: potion. Possible commands: [choose, key, click, wait, state]

2025-05-16 14:47:15,953 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 69, in <module>
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
unable to parse json_text:{
	"index": 0,  // The index of the chosen node from Choice List (0~9).
	"explanation": "Both choices lead to Enemy nodes, but the path from Enemy(0,0) eventually leads to an Unknown node at (2,2), which could offer beneficial encounters like a Merchant or Treasure. Given the current HP is full and the deck is basic, taking a path that might lead to better rewards is preferable over a purely combat-heavy path."
}
error occurs!!:
Invalid command: choose. Possible commands: [start, state]

2025-05-16 18:16:57,746 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
unable to parse json_text:{
	"index": 2,
	"explanation": "Based on the current context, the best choice is to progress to the 'Enemy(5,0)' node. This decision is based on the following factors:

1. The map tree shows that the 'Enemy(5,0)' node has a Merchant encounter as one of its children. Merchants offer valuable opportunities to purchase upgrades, remove cards, or obtain relics, which can significantly improve the Ironclad's overall strength and strategy.

2. The current deck composition is relatively basic, consisting mainly of Strike and Defend cards. Progressing to a Merchant encounter could allow the Ironclad to optimize the deck by removing or upgrading cards, which would enhance its combat effectiveness.

3. With the Ironclad's current HP at 88/88 and the Burning Blood relic, the player is in a strong position to handle enemy encounters. The Ironclad should be able to comfortably progress through the 'Enemy(5,0)' node without risking significant health loss.

4. The other two options, 'Enemy(1,0)' and 'Enemy(2,0)', do not appear to offer any immediate benefits or strategic advantages. Avoiding these nodes and focusing on the Merchant encounter is the best course of action for the Ironclad's progression."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "In this situation, I would choose the Elite (0,6) node as the next level to progress through. This decision is based on the following considerations:

1. The Elite node offers a challenging encounter, which aligns with the Ironclad's playstyle of facing difficult battles head-on. As the Ironclad, we should seek out opportunities to test our strength against powerful enemies.

2. The current HP of 53/88 is relatively high, and the Ironclad's deck seems to be focused on dealing damage and gaining strength. This suggests that the Ironclad is well-equipped to handle an Elite encounter.

3. The Burning Blood relic provides a valuable healing effect after combat, which can help mitigate the risks of the Elite encounter.

4. Progressing through the Elite node opens up the possibility of reaching the Treasure (0,8) node, which could provide valuable rewards to further strengthen the Ironclad's capabilities.

Overall, the Elite node presents a good opportunity for the Ironclad to showcase its power and potentially gain valuable resources for the journey ahead. The current context suggests that the Ironclad is well-prepared to take on this challenge."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current context, I recommend choosing the 'Enemy' node at (0,9). This node represents a combat encounter, which aligns with the Ironclad's playstyle of engaging in battles to gain strength and progress.

Given the Ironclad's current HP of 36/88 and the relatively straightforward deck composition, the 'Enemy' encounter should be manageable. Defeating this enemy will provide valuable resources, such as gold, cards, or relics, which can further enhance the Ironclad's capabilities.

Additionally, the 'Unknown' node at (1,9) introduces more uncertainty, as the potential rewards or challenges are not clearly defined. By choosing the 'Enemy' node, the Ironclad can secure a more predictable outcome and continue its progression through the map.

Overall, the 'Enemy' node at (0,9) represents the best choice in the current context, as it aligns with the Ironclad's strengths, offers potential rewards, and maintains a clear path forward in the game."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current context, the best choice is to proceed to the first node in the Choice List, which is 'Enemy(1,0)'. This node represents an enemy encounter, but it is the closest and most direct path forward in the map tree.

Given that the player's current HP is at 70/70 and the deck contains a balanced mix of offensive (Strike) and defensive (Defend, Survivor+, Neutralize) cards, the player is well-equipped to handle a standard enemy encounter. Additionally, the player has the 'Ring of the Snake' relic, which provides a small but consistent HP recovery after each combat, further mitigating the risks of the upcoming battle.

Choosing this node allows the player to progress deeper into the map tree and potentially encounter more beneficial nodes, such as Merchants or Treasure rooms, in the future. Avoiding the enemy nodes and attempting to find an easier path may lead to a longer and more circuitous route, which could be less efficient in the long run. Therefore, the 'Enemy(1,0)' node is the best choice to make at this stage of the game."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current map tree, the best next level to progress through is the 'Unknown' node at (0,2). This node offers an opportunity to explore and potentially encounter beneficial encounters, such as a Merchant or a Rest site, which could help improve my current resources and strategy.

Given my current HP of 51/70 and a relatively basic deck, I should avoid the 'Enemy' node at (2,2) as it likely leads to a difficult battle that I may not be well-equipped to handle. The 'Unknown' node, on the other hand, provides a chance to gather more information and resources before potentially facing a stronger enemy.

Additionally, the 'Elite' node at (0,5) is a potential long-term goal, but I should focus on strengthening my deck and resources before attempting to take on a challenging Elite encounter. By progressing through the 'Unknown' node first, I can better prepare myself for the upcoming challenges."
}
unable to parse json_text:{
	"index": 1,
	"explanation": "Given the current context, the best choice is to proceed to the Rest (1,5) node. This decision is based on the following factors:

1. Current HP: With only 20/70 HP remaining, it is crucial to prioritize recovering health to prepare for the upcoming battles. The Rest node will allow me to fully heal, which is a significant advantage.

2. Current Deck: The deck is focused on defensive and utility cards, with limited offensive power. Resting will allow me to recharge and optimize my deck for the challenges ahead.

3. Relics: The Ring of the Snake relic provides a useful defensive boost, but does not significantly impact the offensive capabilities of the current deck. Prioritizing survival and deck optimization is more important at this stage.

4. Avoiding Elites: While the Elite (0,5) node could provide valuable rewards, engaging an Elite encounter with the current low HP and deck composition would be risky. It is better to recover and strengthen my position before tackling the Elite.

5. Merchant Opportunity: The Merchant (2,5) node is also a viable option, but the immediate need for health recovery outweighs the potential benefits of visiting the Merchant at this point. I can always return to the Merchant later if necessary.

In summary, the Rest (1,5) node is the best choice to ensure my survival and set me up for success in the subsequent encounters."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current map tree and context, the best next level to progress through is the first node in the Choice List, which is 'Enemy(1,0)'. This choice is based on the following considerations:

1. The current map tree shows a linear progression of enemy encounters, with no immediate beneficial encounters like Merchants or Treasures. Therefore, it is best to proceed cautiously and take on the easiest enemy encounter first.

2. The current HP is at 75/75, which is a comfortable level to take on the first enemy encounter. The deck also contains a good mix of offensive and defensive cards, suggesting the Defect is well-equipped to handle the upcoming battle.

3. Avoiding the more difficult enemy encounters, such as 'Enemy(2,0)', 'Enemy(3,0)', and 'Enemy(5,0)', is a prudent strategy at this stage, as the Defect's resources may not be sufficient to handle them without risk of taking significant damage.

4. Progressing through the 'Enemy(1,0)' node will allow the Defect to potentially gain additional resources, such as cards or relics, which can be used to strengthen the deck and improve the chances of success in future encounters.
"
}
error occurs!!:
Invalid command: end. Possible commands: [start, state]

error occurs!!:
Invalid command: end. Possible commands: [start, state]

error occurs!!:
Invalid command: start. Possible commands: [choose, key, click, wait, state]

2025-05-16 18:35:05,857 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
unable to parse json_text:{
	"index": 2,
	"explanation": "Based on the current map tree and context, the best choice is to progress to the 'Enemy(5,0)' node. This decision is based on the following considerations:

1. The 'Enemy(5,0)' node is the closest to the current node, which minimizes the risk of encountering more difficult encounters along the way.

2. The 'Enemy(5,0)' node has a 'Merchant' node as one of its children, which could provide valuable opportunities to upgrade the deck or purchase healing items, given the current full HP status.

3. The other two options, 'Enemy(0,0)' and 'Enemy(1,0)', do not have any immediately apparent beneficial nodes in their paths, such as a Merchant or Treasure room.

4. With a full HP and a relatively basic deck, the Ironclad should be able to handle the upcoming enemy encounters without too much difficulty. The Burning Blood relic also provides additional sustain during battles.

Therefore, the 'Enemy(5,0)' node is the best choice to progress to the next level and potentially gain valuable resources or upgrades for the deck."
}
unable to parse json_text:{
	"index": 1,
	"explanation": "Based on the current context, the best choice is to progress to the 'Unknown' node at (2,3). This node offers a potential path to an Elite encounter, which could provide valuable rewards and upgrades to strengthen the Ironclad's deck and survivability. 

While the 'Enemy' node at (1,3) is a more straightforward encounter, it does not offer the same potential for progression and growth. The 'Unknown' node, on the other hand, presents an opportunity to encounter an Elite, which could lead to obtaining powerful relics or cards that could significantly improve the Ironclad's overall strategy.

Given the Ironclad's current HP of 78/88 and the relatively basic deck composition, taking on an Elite encounter at this stage could be a calculated risk worth taking. The Burning Blood relic also provides a valuable source of healing, which can help mitigate the risks associated with an Elite fight.

Therefore, the 'Unknown' node at (2,3) is the best choice to progress and potentially gain a significant advantage in the run."
}
unable to parse json_text:{
	"index": 1,
	"explanation": "Given the current context, the best choice is to proceed to the 'Unknown' node at (1,9). This node offers a potential opportunity to encounter a Merchant, which could be beneficial for acquiring new cards or relics to strengthen the Ironclad's deck and survivability. 

The current HP of 20/88 is relatively low, and the Ironclad's deck is focused on basic attacks and defenses. Encountering a Merchant could provide the opportunity to purchase healing potions, upgrade existing cards, or obtain new, more powerful cards to improve the deck's overall effectiveness.

Additionally, the 'Unknown' node at (1,9) has a path leading to a potential 'Enemy' encounter, which could be a manageable challenge given the current resources. Facing an enemy encounter at this point may be necessary for progression, and the Ironclad's deck and relics should be sufficient to handle it.

Compared to the 'Enemy' node at (0,9), the 'Unknown' node at (1,9) offers a more favorable risk-reward balance, with the potential to acquire valuable resources from a Merchant while still being able to handle any enemy encounters along the way."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current context, the best choice is to proceed to the first node in the Choice List, which is 'Enemy(0,0)'. This node represents a standard enemy encounter, which is a relatively safe option compared to the other unknown nodes.

Given that the current HP is 77/77 and the deck contains a balanced set of attack and defense cards, the player should be able to handle a standard enemy encounter without much difficulty. Additionally, defeating this enemy will allow the player to progress further in the map and potentially encounter more beneficial nodes, such as a Merchant or Treasure room.

Avoiding the unknown nodes at this stage is the prudent choice, as they may lead to more challenging encounters that the player may not be equipped to handle with the current resources. Therefore, 'Enemy(0,0)' is the best next level to progress through."
}
2025-05-16 18:45:56,528 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
unable to parse json_text:{
	"index": 1,
	"explanation": "Based on the current context, the best next level to progress through is the 'Enemy' node at (4,0). This choice is based on the following considerations:

1. The map tree shows that the 'Enemy' node at (4,0) has a 'Merchant' node as one of its children, which could provide valuable opportunities to upgrade the deck or purchase healing items.

2. The current HP is at full capacity (88/88), so the player can afford to take on an 'Enemy' encounter without significant risk.

3. The current deck is relatively basic, consisting of Strike and Defend cards. Encountering an 'Enemy' node could provide opportunities to obtain new and potentially more powerful cards to strengthen the deck.

4. The 'Burning Blood' relic provides a consistent source of HP recovery after combat, which can help mitigate the risks of an 'Enemy' encounter.

Overall, the 'Enemy' node at (4,0) offers the best balance of potential rewards and manageable risk given the current resources and strategy. Progressing through this node could lead to valuable upgrades or new card acquisitions, which would better prepare the Ironclad for the challenges ahead."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Given the current context, I would choose to proceed to the 'Enemy' node at (1,9). This choice is based on the following considerations:

1. The 'Treasure' node at the current location (1,8) has been cleared, so the next best option is to progress forward.
2. The 'Enemy' node at (1,9) represents a combat encounter, which is a necessary step to advance through the map and gain potential rewards or upgrades.
3. With a current HP of 67/88 and a decent deck containing some powerful cards like Bash, Power Through, and Heavy Blade, the Ironclad should be able to handle the enemy encounter without too much risk.
4. Clearing the enemy node will open up the path to potentially more valuable nodes, such as the 'Elite' and 'Unknown' nodes further down the map.
5. The relics, including Burning Blood, Paper Phrog, and Ancient Tea Set, provide additional benefits that can help the Ironclad during combat encounters.

Overall, the 'Enemy' node at (1,9) represents the best next step to progress through the map while managing the current resources and risks effectively."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current context, the best choice is to proceed to the Elite node at (0,10). This decision is based on the following factors:

1. Current HP: With 63/88 HP, the Ironclad is in a relatively healthy state, which increases the chances of successfully defeating an Elite encounter.

2. Current Deck: The Ironclad's deck contains a good mix of offensive and defensive cards, including powerful abilities like Spot Weakness+, Heavy Blade, and Seeing Red. This suggests the Ironclad is well-equipped to handle the challenges of an Elite encounter.

3. Relics: The Ironclad has acquired several useful relics, such as Burning Blood, Paper Phrog, and Ancient Tea Set, which can provide additional benefits and support during the Elite fight.

4. Progression: Choosing the Elite node at (0,10) represents a more challenging but potentially more rewarding path forward. Defeating the Elite will grant more experience, better rewards, and potentially unlock new paths on the map, which aligns with the Ironclad's goal of progressing through the Spire.

Overall, the Ironclad's current resources and capabilities suggest they are well-prepared to take on the Elite encounter, and this choice offers the best opportunity for meaningful progression in the game."
}
unable to parse json_text:{
	"index": 1,
	"explanation": "Based on the current map tree, the best next level to progress through is the 'Enemy(1,0)' node. This choice is based on the following considerations:

1. The 'Enemy(1,0)' node is the closest to the current node, which minimizes the risk of encountering difficult battles along the way.
2. The 'Enemy(1,0)' node has a 'Merchant' node as one of its children, which could provide valuable opportunities to upgrade the deck or purchase healing items.
3. The current HP is at 77/77, which is a relatively high level, and the deck contains a good mix of offensive and defensive cards, suggesting the player is well-equipped to handle the upcoming enemy encounter.
4. The 'Ring of the Snake' relic provides a beneficial effect, further increasing the chances of successfully navigating the next level.

Overall, the 'Enemy(1,0)' node offers the best balance of risk and potential reward, making it the optimal choice for the next level progression."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Based on the current context, the best choice is to proceed to the 'Unknown' node at (0,3). This node offers an opportunity to explore and potentially encounter a beneficial encounter, such as a Merchant or Treasure room, which could provide valuable resources to aid in the progression through the Spire.

Given the current HP of 61/77 and the relatively basic deck composition, it is prudent to avoid potentially challenging Elite encounters at this stage. The 'Unknown' node presents a lower-risk option that could lead to more favorable outcomes. Additionally, the presence of the 'Rest' node at (0,5) provides a safety net in case the player needs to recover HP before proceeding further.

Overall, the 'Unknown' node at (0,3) offers the best balance of potential rewards and risk management, aligning with the current strategic considerations for The Silent."
}
unable to parse json_text:{
	"index": 0,
	"explanation": "Given the current context, the best choice is to proceed to the Treasure node at (0,8). This node offers a potential reward that could provide valuable resources, such as new cards, potions, or relics, which could be beneficial for the current run.

The current deck is focused on a Poison-based strategy, with cards like Bouncing Flask and Catalyst. Obtaining new cards or relics from the Treasure node could further strengthen this strategy and improve the chances of success against upcoming encounters.

Additionally, the current HP is relatively low at 23/77, so avoiding a potentially difficult Elite encounter is prudent. The Treasure node offers a lower-risk option that could provide a much-needed boost to the character's resources.

Overall, the Treasure node at (0,8) is the safest and most promising choice in the current context, as it aligns with the current deck strategy and provides an opportunity to improve the character's resources without risking a challenging Elite encounter."
}
2025-05-16 19:02:26,065 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
unable to parse json_text:{
	"index": 1,
	"explanation": "Based on the current context, the best choice is to progress to the Merchant node at (6,1). This decision is based on the following considerations:

1. The Merchant node offers a beneficial encounter that can provide valuable opportunities, such as purchasing new cards, upgrading existing cards, or obtaining relics. This can help strengthen the Ironclad's deck and improve its overall performance.

2. The current HP is at full capacity (88/88), indicating that the Ironclad is in a strong position to take on a Merchant encounter without significant risk of taking damage.

3. The current deck consists of a basic set of cards, including Strikes, Defends, and Bash. While this is a solid foundation, the Merchant can provide opportunities to diversify the deck and acquire more powerful cards that can enhance the Ironclad's capabilities.

4. The Burning Blood relic provides a beneficial effect, which can further support the Ironclad's strategy. Visiting the Merchant may allow the acquisition of additional relics or card upgrades that synergize well with this relic.

Overall, the Merchant node presents the best opportunity for the Ironclad to improve its deck, acquire new resources, and progress through the map without unnecessary risk. Therefore, this is the recommended choice for the next level."
}
unable to parse json_text:{
	"index": 1,
	"explanation": "Given the current context, the best choice is to proceed to the Merchant node at (5,3). This decision is based on the following reasons:

1. The Merchant node offers a valuable opportunity to potentially upgrade or remove cards from the current deck, which is currently composed primarily of basic Strike and Defend cards. Improving the deck's efficiency and synergy will be crucial for progressing through the more challenging encounters ahead.

2. The Ironclad's current HP is at full capacity (88/88), so there is no immediate need to prioritize a path that avoids combat. The Merchant node provides a safer option to optimize the deck before facing the upcoming Elite encounter.

3. The Relics currently held, such as Burning Blood, can provide additional benefits when combined with a well-crafted deck. Visiting the Merchant can help leverage these relics more effectively.

Overall, the Merchant node presents the best opportunity to strengthen the Ironclad's deck and prepare for the upcoming challenges, making it the optimal choice in the current context."
}
unable to parse json_text:{
	"index": 3,
	"explanation": "Based on the current context, the best choice is to progress to the Merchant node at (6,1). This is because the Merchant node offers a beneficial encounter where I can potentially purchase new cards, relics, or healing to improve my overall strategy and survivability. 

My current deck is fairly basic, consisting mostly of Strike and Defend cards, so visiting a Merchant would allow me to diversify my options and strengthen my deck. Additionally, with my current health at 77/77, I'm in a good position to take on a Merchant encounter without significant risk.

While the other nodes are all Enemy encounters, which could provide rewards, they also carry higher risks of taking damage. Given my current resources, it's prudent to prioritize the Merchant node to optimize my deck and prepare for the challenges ahead."
}
wrong index list from "make_grid_choice"2025-06-11 16:30:05,753 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-11 17:09:26,961 - ERROR - An error occurred: Error code: 400 - {'error': {'message': 'An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting (request id: 2025061109092050105121093979135)', 'type': '', 'param': '', 'code': 400}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 70, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 336, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 670, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 384, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 179, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting (request id: 2025061109092050105121093979135)', 'type': '', 'param': '', 'code': 400}}
During task with name 'LLM' and id '5ff99c12-c25f-5b24-57f1-453ff8650c2e'
2025-06-11 17:12:51,783 - ERROR - An error occurred: Error code: 429 - {'error': {'message': '该模型遇到官方限速，联系客服增加并发或请稍后重试 (request id: 2025061109124962178398064478717)', 'type': '', 'param': '', 'code': 429}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "576PMLJ8RWVQV")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 336, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 670, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 384, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 179, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1056, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1056, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': '该模型遇到官方限速，联系客服增加并发或请稍后重试 (request id: 2025061109124962178398064478717)', 'type': '', 'param': '', 'code': 429}}
During task with name 'LLM' and id '497f2306-d70a-5756-f91d-f11c0e1c5f01'
2025-06-11 17:15:36,344 - ERROR - An error occurred: Connection error.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 256, in handle_request
    raise exc from None
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http_proxy.py", line 316, in handle_request
    stream = stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http11.py", line 376, in start_tls
    return self._stream.start_tls(ssl_context, server_hostname, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_backends\sync.py", line 154, in start_tls
    with map_exceptions(exc_map):
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1003, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 914, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 249, in handle_request
    with map_httpcore_exceptions():
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "576PMLJ8RWVQV")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 322, in handle_screen
    return self.make_event_choice()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 477, in make_event_choice
    responses = self.event_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 248, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 139, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1037, in _request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.
During task with name 'LLM' and id '3bc41432-e609-7c69-325d-081914dc3613'
2025-06-11 17:17:03,328 - ERROR - An error occurred: Error code: 400 - {'error': {'message': '模型名字错误请求进入模型广场查看或当前分组 default 下对于模型 gpt-4.1-mini 无使用权限 (request id: 20250611091704793289746812669)', 'type': 'Aihubmix_api_error'}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "576PMLJ8RWVQV")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 322, in handle_screen
    return self.make_event_choice()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 477, in make_event_choice
    responses = self.event_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 248, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 139, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': '模型名字错误请求进入模型广场查看或当前分组 default 下对于模型 gpt-4.1-mini 无使用权限 (request id: 20250611091704793289746812669)', 'type': 'Aihubmix_api_error'}}
During task with name 'LLM' and id '0b80e0cd-62cd-a592-4019-bb407706f914'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-06-11 17:26:53,650 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "576PMLJ8RWVQV")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-11 18:12:17,888 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "576PMLJ8RWVQV")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-11 19:37:30,881 - ERROR - An error occurred: HTTPConnectionPool(host='localhost', port=11434): Max retries exceeded with url: /api/chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000002291F58E4B0>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。'))




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py", line 198, in _new_conn
    sock = connection.create_connection(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\connection.py", line 85, in create_connection
    raise err
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\connection.py", line 73, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py", line 787, in urlopen
    response = self._make_request(
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py", line 493, in _make_request
    conn.request(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py", line 445, in request
    self.endheaders()
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\http\client.py", line 1333, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\http\client.py", line 1093, in _send_output
    self.send(msg)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\http\client.py", line 1037, in send
    self.connect()
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py", line 276, in connect
    self.sock = self._new_conn()
                ^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connection.py", line 213, in _new_conn
    raise NewConnectionError(
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x000002291F58E4B0>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\adapters.py", line 667, in send
    resp = conn.urlopen(
           ^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\connectionpool.py", line 841, in urlopen
    retries = retries.increment(
              ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\urllib3\util\retry.py", line 519, in increment
    raise MaxRetryError(_pool, url, reason) from reason  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='localhost', port=11434): Max retries exceeded with url: /api/chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000002291F58E4B0>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 110, in <module>
    result = coordinator.play_one_game(p_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 740, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 200, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\llms\ollama.py", line 252, in _create_stream
    response = requests.post(
               ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\api.py", line 115, in post
    return request("post", url, data=data, json=json, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\api.py", line 59, in request
    return session.request(method=method, url=url, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\requests\adapters.py", line 700, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='localhost', port=11434): Max retries exceeded with url: /api/chat (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x000002291F58E4B0>: Failed to establish a new connection: [WinError 10061] 由于目标计算机积极拒绝，无法连接。'))
During task with name 'LLM' and id '9438124c-fe95-3500-e171-d4fdb500f6fd'
2025-06-11 21:15:38,087 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 71, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-11 23:43:44,916 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "3I0F0ZCZD9KUC")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-11 23:46:40,080 - ERROR - An error occurred: '<=' not supported between instances of 'int' and 'NoneType'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class,seed = "3I0F0ZCZD9KUC")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 251, in get_play_card_action
    if target_index != -1 and 0 <= target_index < len(available_monsters):
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: '<=' not supported between instances of 'int' and 'NoneType'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-06-12 00:13:23,357 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: play. Possible commands: [start, state]

error occurs!!:
Invalid command: start. Possible commands: [key, click, wait, state]

error occurs!!:
Invalid command: start. Possible commands: [choose, key, click, wait, state]

2025-06-12 00:20:19,734 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-12 00:21:04,127 - ERROR - An error occurred: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull hermes3:3b`.




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 740, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 200, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 291, in _generate
    final_chunk = self._chat_stream_with_aggregation(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 222, in _chat_stream_with_aggregation
    for stream_resp in self._create_chat_stream(messages, stop, **kwargs):
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\chat_models\ollama.py", line 194, in _create_chat_stream
    yield from self._create_stream(
               ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_community\llms\ollama.py", line 266, in _create_stream
    raise OllamaEndpointNotFoundError(
langchain_community.llms.ollama.OllamaEndpointNotFoundError: Ollama call failed with status code 404. Maybe your model is not found and you should pull the model with `ollama pull hermes3:3b`.
During task with name 'LLM' and id '97c58458-6f09-3a08-9bcd-88b97f187bff'
error occurs!!:
Invalid command: end. Possible commands: [potion, key, click, wait, state]

2025-06-12 00:33:01,406 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-06-12 01:17:03,650 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
error occurs!!:
Invalid command: play. Possible commands: [potion, key, click, wait, state]

2025-06-12 18:19:18,495 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-13 01:41:43,480 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-13 02:08:18,856 - ERROR - An error occurred: 'ChatOpenAI' object has no attribute 'model'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 797, in invoke
    if self.action != 'algorithm' and self.llm.model!="lora_gemma3":
                                      ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatOpenAI' object has no attribute 'model'
2025-06-13 02:33:45,435 - ERROR - An error occurred: Error code: 400 - {'error': {'message': 'Visibility check was unavailable. Please retry the request and contact support if the problem persists (request id: 2025061218321578159718419604051)', 'type': '', 'param': '', 'code': 503}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 336, in handle_screen
    return self.choose_card_reward()
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 670, in choose_card_reward
    responses = self.choose_card_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 384, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\choose_card_agent.py", line 179, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'Visibility check was unavailable. Please retry the request and contact support if the problem persists (request id: 2025061218321578159718419604051)', 'type': '', 'param': '', 'code': 503}}
During task with name 'LLM' and id '14433ac4-3c43-daf2-e56b-eae25f22bac9'
2025-06-13 15:48:20,452 - ERROR - An error occurred: 'ChatOllama' object has no attribute 'model_name'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 797, in invoke
    if self.action != 'algorithm' and self.llm.model_name!="lora_gemma3:latest":
                                      ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'ChatOllama' object has no attribute 'model_name'. Did you mean: 'model_dump'?
error occurs!!:
Invalid command: proceed. Possible commands: [choose, key, click, wait, state]

2025-06-13 16:00:18,628 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-15 15:12:22,311 - ERROR - An error occurred: 'NoneType' object has no attribute 'can_be_executed'




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 221, in play_one_game
    self.execute_next_action_if_ready()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 114, in execute_next_action_if_ready
    if len(self.action_queue) > 0 and self.action_queue[0].can_be_executed(self):
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'can_be_executed'
2025-06-17 13:26:28,730 - ERROR - An error occurred: Error code: 403 - {'error': {'message': 'user quota is not enough (request id: 2025061705262884070865699225277)', 'type': 'Aihubmix_api_error', 'param': '', 'code': 'insufficient_user_quota'}}




Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 102, in get_next_action_in_game
    return self.handle_screen()
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 322, in handle_screen
    return self.make_event_choice()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 477, in make_event_choice
    responses = self.event_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 248, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\event_choice_agent.py", line 139, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1071, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.PermissionDeniedError: Error code: 403 - {'error': {'message': 'user quota is not enough (request id: 2025061705262884070865699225277)', 'type': 'Aihubmix_api_error', 'param': '', 'code': 'insufficient_user_quota'}}
During task with name 'LLM' and id 'b4b13654-de82-6847-f527-7a8a5bd7222a'
2025-06-17 18:03:43,952 - ERROR - An error occurred: Connection error.




Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 256, in handle_request
    raise exc from None
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http_proxy.py", line 316, in handle_request
    stream = stream.start_tls(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_sync\http11.py", line 376, in start_tls
    return self._stream.start_tls(ssl_context, server_hostname, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_backends\sync.py", line 154, in start_tls
    with map_exceptions(exc_map):
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1003, in _request
    response = self._client.send(
               ^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 914, in send
    response = self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 249, in handle_request
    with map_httpcore_exceptions():
         ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(value)
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\32685\Desktop\spirecomm\main.py", line 72, in <module>
    result = coordinator.play_one_game(chosen_class)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 222, in play_one_game
    self.receive_game_state_update()
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\communication\coordinator.py", line 181, in receive_game_state_update
    new_action = self.state_change_callback(self.last_game_state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 143, in get_next_action_in_game_new
    action = self.get_next_action_in_game(game_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 136, in get_next_action_in_game
    return self.get_play_card_action(room=room)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\agent.py", line 190, in get_play_card_action
    responses = self.battle_agent.invoke(
                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 757, in invoke
    result = self.graph.invoke(state, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 2124, in invoke
    for chunk in self.stream(
                 ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\__init__.py", line 1779, in stream
    for _ in runner.tick(
             ^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\runner.py", line 230, in tick
    run_with_retry(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\pregel\retry.py", line 40, in run_with_retry
    return task.proc.invoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 546, in invoke
    input = step.invoke(input, config, **kwargs)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langgraph\utils\runnable.py", line 310, in invoke
    ret = context.run(self.func, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\Desktop\spirecomm\spirecomm\ai\battle_agent.py", line 217, in llm_1
    "messages": [self.llm.invoke(messages)]
                 ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 307, in invoke
    self.generate_prompt(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 843, in generate_prompt
    return self.generate(prompt_messages, stop=stop, callbacks=callbacks, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 683, in generate
    self._generate_with_cache(
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_core\language_models\chat_models.py", line 908, in _generate_with_cache
    result = self._generate(
             ^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\langchain_openai\chat_models\base.py", line 800, in _generate
    response = self.client.create(**payload)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_utils\_utils.py", line 279, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\resources\chat\completions\completions.py", line 879, in create
    return self._post(
           ^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1290, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 967, in request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1027, in _request
    return self._retry_request(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1105, in _retry_request
    return self._request(
           ^^^^^^^^^^^^^^
  File "C:\Users\32685\AppData\Local\Programs\Python\Python312\Lib\site-packages\openai\_base_client.py", line 1037, in _request
    raise APIConnectionError(request=request) from err
openai.APIConnectionError: Connection error.
During task with name 'LLM' and id '991e2bc6-9fa8-decb-227e-0aabf74bde61'
